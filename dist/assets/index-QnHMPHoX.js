const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Index-DeOu0rCn.js","assets/vendor-react-Bu_1CUKu.js","assets/vendor-CaMlX_x-.js","assets/vendor-date-fns-BCWkNTJO.js","assets/ThemeToggle-CoAAn6C_.js","assets/dropdown-menu-cf7j1Lwd.js","assets/useAreaProgress-C4N6BS3s.js","assets/useMoodTracking-B0ZLuTFo.js","assets/DeleteAllTasksButton-CsD95Qj5.js","assets/separator-B-xoOM7X.js","assets/card-BnqYcvPQ.js","assets/skeleton-DzSR_xWs.js","assets/Today-Br2sLK4C.js","assets/checkbox-C0NHjcbm.js","assets/Planner-BcOUA1gn.js","assets/googleCalendarClient-DUpf59ZV.js","assets/Achievements-REa8krks.js","assets/Settings-DscWvqqi.js","assets/Auth-BQVoxxAg.js","assets/NotFound-8AlYBxhJ.js","assets/Mindfulness-B3lhV7pL.js","assets/Assistant-DMgqA09T.js","assets/ProfileEdit-CWjr9kXf.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,a,s)=>((t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s)(t,"symbol"!=typeof a?a+"":a,s);import{r as a,j as s,V as r,c as i,d as n,C as o,X as l,T as d,D as c,P as u,e as m,f as h,g as p,h as f,S as x,O as g,i as y,k as b,l as v,m as j,n as w,o as N,p as k,I as C,F as S,q as E,s as T,u as _,t as D,U as O,v as I,L as A,M as F,w as R,H as z,x as M,y as L,B as P,z as q,E as U,G as $,J as H,K as V,N as B,Q as J,W as Z,Y as X,Z as G,_ as K,$ as W,a0 as Y,a1 as Q,a2 as ee,a3 as te,a4 as ae,a5 as se,a6 as re,a7 as ie,a8 as ne,a9 as oe,aa as le,ab as de,ac as ce,ad as ue,ae as me,af as he,ag as pe,ah as fe,ai as xe,aj as ge,ak as ye,al as be,am as ve,an as je,ao as we,ap as Ne,aq as ke,ar as Ce,as as Se,at as Ee,au as Te,av as _e,aw as De,ax as Oe,R as Ie,ay as Ae}from"./vendor-react-Bu_1CUKu.js";import{H as Fe,I as Re,J as ze,K as Me,T as Le,L as Pe,M as qe,N as Ue,Q as $e}from"./vendor-CaMlX_x-.js";import{C as He,a as Ve,n as Be,f as Je,F as Ze,G as Xe,H as Ge}from"./vendor-date-fns-BCWkNTJO.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const Ke="ADD_TOAST",We="UPDATE_TOAST",Ye="DISMISS_TOAST",Qe="REMOVE_TOAST";let et=0;const tt=new Map,at=(e,t)=>{switch(t.type){case Ke:return{...e,toasts:[t.toast,...e.toasts].slice(0,20)};case We:return{...e,toasts:e.toasts.map((e=>e.id===t.toast.id?{...e,...t.toast}:e))};case Ye:{const{toastId:a}=t;if(a){const e=tt.get(a);e&&(clearTimeout(e),tt.delete(a))}else tt.forEach(((e,t)=>{clearTimeout(tt.get(t)),tt.delete(t)}));return{...e,toasts:e.toasts.map((e=>e.id===a||void 0===a?{...e,open:!1}:e))}}case Qe:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter((e=>e.id!==t.toastId))};default:return e}},st=[];let rt={toasts:[]};function it(e){rt=at(rt,e),st.forEach((t=>{t(e)}))}function nt(){const[e,t]=a.useState(rt);return a.useEffect((()=>{const e=e=>{t((t=>at(t,e)))};return st.push(e),()=>{const t=st.indexOf(e);t>-1&&st.splice(t,1)}}),[]),{...e,toast:ot,dismiss:e=>it({type:Ye,toastId:e})}}function ot(e){const t=(et=(et+1)%Number.MAX_SAFE_INTEGER,et.toString()),a=()=>it({type:Ye,toastId:t});return setTimeout(a,3e3),it({type:Ke,toast:{...e,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>it({type:We,toast:{...e,id:t}})}}function lt(...e){return Fe(Re(e))}const dt=u,ct=a.forwardRef((({className:e,...t},a)=>s.jsx(r,{ref:a,className:lt("fixed bottom-20 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-20 sm:right-0 sm:top-auto sm:flex-col md:max-w-[320px]",e),...t})));ct.displayName=r.displayName;const ut=ze("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-3 pr-5 shadow-md transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=end]:animate-out data-[state=closed]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:animate-in data-[state=open]:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background/80 backdrop-blur-sm text-foreground",destructive:"destructive group border-destructive/30 bg-destructive/80 backdrop-blur-sm text-destructive-foreground"}},defaultVariants:{variant:"default"}}),mt=a.forwardRef((({className:e,variant:t,...a},r)=>s.jsx(i,{ref:r,className:lt(ut({variant:t}),e),"data-swipe-direction":"right","data-swipe-threshold":.3,"data-swipe-velocity":.2,...a})));mt.displayName=i.displayName;a.forwardRef((({className:e,...t},a)=>s.jsx(n,{ref:a,className:lt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}))).displayName=n.displayName;const ht=a.forwardRef((({className:e,...t},a)=>s.jsx(o,{ref:a,className:lt("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(l,{className:"h-3 w-3"})})));ht.displayName=o.displayName;const pt=a.forwardRef((({className:e,...t},a)=>s.jsx(d,{ref:a,className:lt("text-xs font-medium",e),...t})));pt.displayName=d.displayName;const ft=a.forwardRef((({className:e,...t},a)=>s.jsx(c,{ref:a,className:lt("text-xs opacity-90",e),...t})));function xt(){const{toasts:e}=nt();return s.jsxs(dt,{children:[e.map((function({id:e,title:t,description:a,action:r,...i}){return s.jsxs(mt,{...i,children:[s.jsxs("div",{className:"grid gap-1",children:[t&&s.jsx(pt,{children:t}),a&&s.jsx(ft,{children:a})]}),r,s.jsx(ht,{})]},e)})),s.jsx(ct,{})]})}ft.displayName=c.displayName;const gt=({...e})=>{const{theme:t="system"}=Me();return s.jsx(Le,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})},yt=h,bt=p,vt=f,jt=a.forwardRef((({className:e,sideOffset:t=4,...a},r)=>s.jsx(m,{ref:r,sideOffset:t,className:lt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a})));jt.displayName=m.displayName;const wt=a.createContext(void 0);function Nt({children:e}){const[t,r]=a.useState(!1);return s.jsx(wt.Provider,{value:{isOpen:t,setIsOpen:r,toggle:()=>r((e=>!e))},children:e})}function kt(){const e=a.useContext(wt);if(void 0===e)throw new Error("useSidebar must be used within a SidebarProvider");return e}const Ct=ze("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-gradient-to-r from-[#8B5CF6] to-[#6E59A5] text-white shadow-sm hover:shadow-md hover:opacity-90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",nav:"flex flex-col items-center justify-center rounded-full p-2 hover:bg-gray-100 focus:outline-none transition-colors focus-visible:bg-accent",activeNav:"flex flex-col items-center justify-center rounded-full p-2 bg-gradient-to-r from-[#9b87f5] to-[#7E69AB] text-white shadow-sm focus:outline-none transition-colors",taskTypeInactive:"flex-1 py-3 border border-gray-200 bg-white text-gray-700 rounded-md hover:bg-gray-50",taskTypeActive:"flex-1 py-3 border-2 border-purple-500 bg-purple-50 text-purple-700 rounded-md font-medium",priorityInactive:"flex-1 py-3 border border-gray-200 bg-white text-gray-700 rounded-md hover:bg-gray-50",priorityLow:"flex-1 py-3 border-2 border-blue-500 bg-blue-50 text-blue-700 rounded-md font-medium",priorityMedium:"flex-1 py-3 border-2 border-orange-500 bg-orange-50 text-orange-700 rounded-md font-medium",priorityHigh:"flex-1 py-3 border-2 border-red-500 bg-red-50 text-red-700 rounded-md font-medium",colorOption:"w-10 h-10 rounded-full p-0",colorOptionActive:"w-10 h-10 rounded-full p-0 ring-2 ring-offset-2 ring-purple-600",durationInactive:"px-3 py-2 text-sm rounded-full bg-gray-100 text-gray-700 hover:bg-gray-200",durationActive:"px-3 py-2 text-sm rounded-full bg-purple-500 text-white",eventTypeTab:"flex items-center gap-1.5 py-1.5 px-3 rounded-md flex-1",eventTypeTabActive:"flex items-center gap-1.5 py-1.5 px-3 rounded-md flex-1 bg-primary text-primary-foreground",quickAdd:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white border-0 outline-none shadow-none",filterButton:"justify-start",filterButtonActive:"justify-start bg-primary text-primary-foreground",navbarTab:"flex flex-col items-center justify-center p-2 rounded-lg transition-all duration-200 text-gray-500 hover:text-primary",navbarTabActive:"flex flex-col items-center justify-center p-2 rounded-lg transition-all duration-200 text-primary bg-primary/10 font-medium",navbarProfile:"flex items-center justify-center rounded-full p-0 shadow-lg bg-gradient-to-r from-purple-600 to-indigo-600 text-white hover:opacity-90 transition-all duration-200",quickNoteOption:"inline-flex items-center justify-center gap-2 text-sm font-medium transition-colors rounded-full border"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10",nav:"h-12 w-12 sm:h-14 sm:w-14",navbarTab:"h-auto w-16",navbarProfile:"h-12 w-12"}},defaultVariants:{variant:"default",size:"default"}}),St=a.forwardRef((({className:e,variant:t,size:a,asChild:r=!1,...i},n)=>{const o=r?x:"button";return s.jsx(o,{className:lt(Ct({variant:t,size:a,className:e})),ref:n,...i})}));St.displayName="Button";const Et=a.createContext({shouldRefresh:!1,toggleRefresh:()=>{},refreshTasks:!1,toggleRefreshTasks:()=>{},refreshTasksFunction:()=>{},refreshAssistant:()=>{},refresh:()=>{}}),Tt=()=>a.useContext(Et),_t=({children:e})=>{const[t,r]=a.useState(!1),[i,n]=a.useState(!1),[o,l]=a.useState(0),d=()=>{l((e=>e+1))},c={shouldRefresh:t,toggleRefresh:()=>{r((e=>!e))},refreshTasks:i,toggleRefreshTasks:()=>{n((e=>!e))},refreshTasksFunction:()=>{n((e=>!e))},refreshAssistant:d,refresh:d};return s.jsx(Et.Provider,{value:c,children:e})},Dt=Pe("https://tjauuyydxagnugqvmigm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRqYXV1eXlkeGFnbnVncXZtaWdtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA0NzYxNzcsImV4cCI6MjA1NjA1MjE3N30.OUSJXM9icoCNewGE6ZMXTqf6XOt2ySP4OGfRT-bir1A"),Ot=N,It=w,At=a.forwardRef((({className:e,...t},a)=>s.jsx(g,{className:lt("fixed inset-0 z-50 bg-black/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:a})));At.displayName=g.displayName;const Ft=ze("fixed z-50 gap-0 bg-background shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-[95%] border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-[95%] border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Rt=a.forwardRef((({side:e="right",className:t,children:a,...r},i)=>s.jsxs(It,{children:[s.jsx(At,{}),s.jsxs(y,{ref:i,className:lt(Ft({side:e}),t),...r,children:[a,s.jsxs(b,{className:"absolute right-3 top-3 rounded-full opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary text-muted-foreground bg-black/10 p-2 hover:bg-black/20",children:[s.jsx(l,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]})));Rt.displayName=y.displayName;const zt=({className:e,...t})=>s.jsx("div",{className:lt("flex flex-col space-y-1 text-center sm:text-left bg-gradient-to-r from-purple-600 to-indigo-600 p-4 text-white",e),...t});zt.displayName="SheetHeader";const Mt=a.forwardRef((({className:e,...t},a)=>s.jsx(v,{ref:a,className:lt("text-lg font-semibold text-white",e),...t})));Mt.displayName=v.displayName;const Lt=a.forwardRef((({className:e,...t},a)=>s.jsx(j,{ref:a,className:lt("text-sm text-white/90",e),...t})));Lt.displayName=j.displayName;const Pt=({className:e,...t})=>s.jsx("div",{className:lt("p-4 space-y-4",e),...t});Pt.displayName="SheetBody";const qt=a.forwardRef((({className:e,...t},a)=>s.jsx(k,{ref:a,className:lt("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t})));qt.displayName=k.displayName;const Ut=a.forwardRef((({className:e,...t},a)=>s.jsx(C,{ref:a,className:lt("aspect-square h-full w-full",e),...t})));Ut.displayName=C.displayName;const $t=a.forwardRef((({className:e,...t},a)=>s.jsx(S,{ref:a,className:lt("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t})));$t.displayName=S.displayName;const Ht=a.forwardRef((({className:e,...t},a)=>s.jsx(E,{className:lt("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-gray-200",e),...t,ref:a,children:s.jsx(T,{className:lt("pointer-events-none block h-4 w-4 rounded-full bg-white shadow-sm ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})));Ht.displayName=E.displayName;const Vt=a.createContext(void 0);function Bt({children:e}){const[t,r]=a.useState(null),[i,n]=a.useState(!0),[o,l]=a.useState(null),d=async()=>{try{n(!0),l(null);const{data:{session:e}}=await Dt.auth.getSession();if(null==e?void 0:e.user){const{data:t,error:a}=await Dt.from("profiles").select("*").eq("id",e.user.id).single();if(a)throw a;r({...e.user,profile:t})}else r(null)}catch(e){l(e)}finally{n(!1)}};a.useEffect((()=>{d();const{data:e}=Dt.auth.onAuthStateChange(((e,t)=>{(null==t?void 0:t.user)?d():r(null)}));return()=>{e.subscription.unsubscribe()}}),[]);return s.jsx(Vt.Provider,{value:{user:t,isLoading:i,error:o,refreshUser:async()=>{await d()}},children:e})}const Jt=()=>{const e=a.useContext(Vt);if(void 0===e)throw new Error("useUser must be used within a UserProvider");return e};function Zt(){const{isOpen:e,setIsOpen:t}=kt(),[r,i]=a.useState("Usuário"),[n,o]=a.useState(null),[l,d]=a.useState(!1),c=_(),u=D();Jt(),a.useEffect((()=>{(async()=>{var e,t;try{const{data:{user:a}}=await Dt.auth.getUser();if(a){const{data:s}=await Dt.from("profiles").select("username, full_name, avatar_url").eq("id",a.id).maybeSingle();s?(i(s.full_name||s.username||(null==(e=a.email)?void 0:e.split("@")[0])||"Usuário"),o(s.avatar_url)):i((null==(t=a.email)?void 0:t.split("@")[0])||"Usuário")}}catch(a){}})()}),[]);const m=[{path:"/",label:"Início",icon:z},{path:"/today",label:"Inbox",icon:M},{path:"/planner",label:"Agenda",icon:L},{path:"/assistant",label:"Assistente",icon:P},{path:"/mindfulness",label:"Mente",icon:q},{path:"/achievements",label:"Conquistas",icon:U},{path:"/settings",label:"Configurações",icon:$}];return"/auth"===c.pathname?null:s.jsx(Ot,{open:e,onOpenChange:t,children:s.jsxs(Rt,{side:"left",className:"p-0 w-full max-w-xs border-r-0 shadow-xl h-full flex flex-col",children:[s.jsxs("div",{className:"relative overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-primary/90 to-secondary/90 h-32 w-full absolute top-0 left-0"}),s.jsx("div",{className:"bg-[url('https://images.unsplash.com/photo-1579546929518-9e396f3cc809?q=80&w=2070')] bg-cover bg-center opacity-30 h-32 w-full absolute top-0 left-0"}),s.jsx("div",{className:"relative z-10 pt-6 pb-10 px-5",children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsxs(qt,{className:"h-16 w-16 border-4 border-white shadow-md mb-3",children:[s.jsx(Ut,{src:n||void 0}),s.jsx($t,{className:"bg-primary/90 text-white text-xl",children:r.charAt(0).toUpperCase()})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-white text-xl font-bold mb-1",children:r}),s.jsxs(St,{variant:"ghost",size:"sm",onClick:()=>{t(!1),u("/profileEdit")},className:"hover:bg-white/20 rounded-full text-xs py-1 px-3 h-auto flex items-center gap-1 font-bold text-zinc-600",children:[s.jsx(O,{className:"h-3 w-3 mr-1"})," Editar perfil ",s.jsx(I,{className:"h-3 w-3"})]})]})]})})]}),s.jsx("nav",{className:"flex-grow overflow-y-auto mt-2 px-2",children:s.jsx("div",{className:"space-y-1 w-full",children:m.map((e=>{const a=c.pathname===e.path;return s.jsx(A,{to:e.path,onClick:()=>t(!1),children:s.jsxs(St,{variant:a?"secondary":"ghost",className:"w-full justify-start px-4 py-2.5 h-auto text-sm rounded-lg "+(a?"bg-primary/10 text-primary font-medium":"text-gray-700 hover:bg-gray-100"),children:[s.jsx(e.icon,{className:"mr-3 h-5 w-5 "+(a?"text-primary":"text-gray-500")}),e.label]})},e.path)}))})}),s.jsxs("div",{className:"mt-auto border-t border-gray-100 p-4 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm text-gray-700 flex items-center",children:[s.jsx(F,{className:"h-4 w-4 mr-2 text-gray-500"}),"Modo escuro"]}),s.jsx(Ht,{checked:l,onCheckedChange:()=>{d(!l)}})]}),s.jsxs(St,{variant:"outline",className:"w-full gap-2 text-sm border-gray-200 hover:bg-primary/5 hover:text-primary hover:border-primary/20 transition-all rounded-lg",onClick:async()=>{await Dt.auth.signOut(),t(!1),u("/auth")},children:[s.jsx(R,{className:"h-3.5 w-3.5"}),"Sair"]})]})]})})}const Xt=new class{constructor(){t(this,"errors",[]),t(this,"isEnabled",!0),this.setupErrorListeners()}setupErrorListeners(){window.addEventListener("error",(e=>{var t;this.isEnabled&&(this.trackError({type:"runtime",message:e.message,stack:null==(t=e.error)?void 0:t.stack}),e.preventDefault())})),window.addEventListener("unhandledrejection",(e=>{var t;this.isEnabled&&(this.trackError({type:"promise",message:String(e.reason),stack:null==(t=e.reason)?void 0:t.stack}),e.preventDefault())})),console.error=(...e)=>{this.isEnabled&&this.trackError({type:"console",message:e.map((e=>"object"==typeof e?JSON.stringify(e):String(e))).join(" ")})}}trackError({type:e,message:t,stack:a}){const s={type:e,message:t,stack:a,timestamp:(new Date).toISOString()};this.errors.push(s),this.errors.length>100&&this.errors.shift(),this.sendErrorToBackend(s)}async sendErrorToBackend(e){try{const{data:{user:t}}=await Dt.auth.getUser();t&&await Dt.from("system_logs").insert({user_id:t.id,log_type:"error",content:e,created_at:(new Date).toISOString()})}catch(t){setTimeout((()=>{this.sendErrorToBackend(e)}),6e4)}}setEnabled(e){this.isEnabled=e}getErrors(){return[...this.errors]}clearErrors(){this.errors=[]}};const Gt=new class{constructor(){t(this,"slowFunctions",new Map),t(this,"memoryUsage",[]),t(this,"isEnabled",!0),this.startMonitoring()}startMonitoring(){setInterval((()=>{this.isEnabled&&performance&&performance.memory&&(this.memoryUsage.push({timestamp:(new Date).toISOString(),usage:performance.memory.usedJSHeapSize}),this.memoryUsage.length>100&&this.memoryUsage.shift())}),6e4)}monitorFunction(e,t){return(...a)=>{if(!this.isEnabled)return t(...a);const s=performance.now();try{return t(...a)}finally{const t=performance.now()-s,a=this.slowFunctions.get(e)||{count:0,totalTime:0,avgTime:0};a.count++,a.totalTime+=t,a.avgTime=a.totalTime/a.count,this.slowFunctions.set(e,a),t>1e3&&Xt.trackError({type:"performance",message:`Função ${e} demorou ${t.toFixed(2)}ms para executar`})}}}getSlowFunctions(e=500){const t=[];return this.slowFunctions.forEach(((a,s)=>{a.avgTime>e&&t.push({functionName:s,avgTime:a.avgTime})})),t}detectMemoryLeaks(){if(this.memoryUsage.length<10)return!1;let e=0;for(let t=1;t<this.memoryUsage.length;t++)this.memoryUsage[t].usage>this.memoryUsage[t-1].usage&&e++;return e>.8*this.memoryUsage.length}setEnabled(e){this.isEnabled=e}};const Kt=new class{constructor(){t(this,"isEnabled",!0),t(this,"fixedIssues",[]),this.setupFixers()}setupFixers(){setInterval((()=>{this.isEnabled&&(this.checkAndFixMemoryIssues(),this.checkAndFixEventListeners(),this.checkAndFixStateUpdatesOnUnmounted(),this.checkAndOptimizeRenderCycles())}),6e4)}checkAndFixMemoryIssues(){if(Gt.detectMemoryLeaks()&&(this.recordFix({type:"memory",description:"Possível vazamento de memória detectado",fixed:!1}),window.gc))try{window.gc()}catch(e){}}checkAndFixEventListeners(){this.recordFix({type:"eventListeners",description:"Verificação de event listeners não removidos",fixed:!1})}checkAndFixStateUpdatesOnUnmounted(){this.recordFix({type:"reactState",description:"Monitoramento de atualizações de estado em componentes desmontados",fixed:!1})}checkAndOptimizeRenderCycles(){this.recordFix({type:"rendering",description:"Monitoramento de ciclos de renderização excessivos",fixed:!1})}recordFix(e){this.fixedIssues.push({...e,timestamp:(new Date).toISOString()}),this.fixedIssues.length>100&&this.fixedIssues.shift()}applyFix(e,t){if(!this.isEnabled)return!1;try{switch(e){case"memoryLeak":this.recordFix({type:e,description:"Tentativa de correção de vazamento de memória",fixed:!0});break;case"stateUpdate":this.recordFix({type:e,description:"Correção de update de estado em componente desmontado",fixed:!0});break;default:return!1}return!0}catch(a){return Xt.trackError({type:"selfFixer",message:`Falha ao aplicar correção ${e}: ${a}`,stack:a.stack}),!1}}getFixHistory(){return[...this.fixedIssues]}setEnabled(e){this.isEnabled=e}};const Wt=new class{constructor(){t(this,"changes",[]),t(this,"isEnabled",!0)}recordChange({type:e,description:t,code_before:a,code_after:s,impact:r="low",affected_components:i=[]}){if(!this.isEnabled)return;const n={type:e,description:t,timestamp:(new Date).toISOString(),code_before:a,code_after:s,impact:r,affected_components:i};this.changes.push(n),this.changes.length>100&&this.changes.shift(),this.saveChangeToDatabase(n),"high"===r&&this.sendAlertEmail(n)}async saveChangeToDatabase(e){try{const{data:{user:t}}=await Dt.auth.getUser();t&&await Dt.from("monitoring_events").insert({user_id:t.id,event_type:"code_change",event_data:{change_type:e.type,description:e.description,code_before:e.code_before,code_after:e.code_after,impact:e.impact,affected_components:e.affected_components},created_at:e.timestamp})}catch(t){Xt.trackError({type:"database",message:`Falha ao salvar alteração de código: ${t}`,stack:t.stack})}}detectRemovedFunctions(e,t){if(!e||!t)return[];const a=/function\s+([a-zA-Z0-9_]+)\s*\(/g,s=/([a-zA-Z0-9_]+)\s*\(\s*\)\s*{/g,r=new Set;let i;for(;null!==(i=a.exec(e));)r.add(i[1]);for(;null!==(i=s.exec(e));)r.add(i[1]);const n=new Set;for(a.lastIndex=0,s.lastIndex=0;null!==(i=a.exec(t));)n.add(i[1]);for(;null!==(i=s.exec(t));)n.add(i[1]);const o=[];return r.forEach((e=>{n.has(e)||o.push(e)})),o}isSafeChange(e,t){const a=this.detectRemovedFunctions(e,t);return{safe:0===a.length,removedFunctions:a}}generateChangeSummary(e=7){const t=new Date((new Date).getTime()-24*e*60*60*1e3).toISOString(),a=this.changes.filter((e=>e.timestamp>=t)),s=new Set;let r=0;return a.forEach((e=>{"high"===e.impact&&r++,e.affected_components.forEach((e=>{s.add(e)}))})),{totalChanges:a.length,highImpactChanges:r,changedComponents:s,recentChanges:a.map((e=>({type:e.type,description:e.description,timestamp:e.timestamp,impact:e.impact})))}}async sendAlertEmail(e){try{const{data:{user:t}}=await Dt.auth.getUser();if(!t)return;const a={email:"guilherme-varela@hotmail.com",subject:`ALERTA: Alteração de alto impacto detectada - ${e.type}`,change:e,user_id:t.id},{error:s}=await Dt.functions.invoke("send-code-alert",{body:a});if(s)throw new Error(`Falha ao chamar função send-code-alert: ${s.message}`)}catch(t){Xt.trackError({type:"email",message:`Falha ao enviar email de alerta: ${t}`,stack:t.stack})}}scheduleReports(e="weekly"){setInterval((()=>{this.sendPeriodicReport(e)}),{daily:864e5,weekly:6048e5,monthly:2592e6}[e])}async sendPeriodicReport(e){try{const{data:{user:t}}=await Dt.auth.getUser();if(!t)return;const a={daily:1,weekly:7,monthly:30}[e],s=this.generateChangeSummary(a);if(0===s.totalChanges)return;const r={email:"guilherme-varela@hotmail.com",subject:`Relatório ${e} de alterações no código`,reportType:e,reportData:s,user_id:t.id},{error:i}=await Dt.functions.invoke("send-code-report",{body:r});if(i)throw new Error(`Falha ao chamar função send-code-report: ${i.message}`)}catch(t){Xt.trackError({type:"email",message:`Falha ao enviar relatório periódico: ${t}`,stack:t.stack})}}setEnabled(e){this.isEnabled=e}getChanges(){return this.changes.map((e=>({type:e.type,description:e.description,timestamp:e.timestamp,impact:e.impact})))}};const Yt=new class{constructor(){t(this,"isEnabled",!0),t(this,"syncInterval",null),t(this,"lastSyncTime",null),t(this,"reportEmailFrequency","weekly"),this.initialize()}async initialize(){const{data:{user:e}}=await Dt.auth.getUser();e&&(this.startDataSync(),this.scheduleReports(),this.logEvent("agent_initialized",{timestamp:(new Date).toISOString(),userId:e.id}))}startDataSync(){this.syncInterval&&clearInterval(this.syncInterval),this.syncInterval=window.setInterval((()=>{this.isEnabled&&this.syncDataWithBackend()}),3e5)}convertDatesToISOStrings(e){if(null==e)return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map((e=>this.convertDatesToISOStrings(e)));if("object"==typeof e){const t={};for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=this.convertDatesToISOStrings(e[a]));return t}return e}async syncDataWithBackend(){try{const{data:{user:e}}=await Dt.auth.getUser();if(!e)return;const t={errors:Xt.getErrors(),slowFunctions:Gt.getSlowFunctions(),fixHistory:Kt.getFixHistory(),codeChanges:Wt.getChanges(),stats:{memoryLeakDetected:Gt.detectMemoryLeaks(),timestamp:(new Date).toISOString()}},a=this.convertDatesToISOStrings(t);await Dt.from("monitoring_data").insert({user_id:e.id,data:a,created_at:(new Date).toISOString()}),this.lastSyncTime=new Date,Xt.clearErrors()}catch(e){}}scheduleReports(){Wt.scheduleReports(this.reportEmailFrequency)}setReportFrequency(e){this.reportEmailFrequency=e,this.scheduleReports()}async logEvent(e,t){try{const{data:{user:a}}=await Dt.auth.getUser();if(a){const s=this.convertDatesToISOStrings(t);await Dt.from("monitoring_events").insert({user_id:a.id,event_type:e,event_data:s,created_at:(new Date).toISOString()})}}catch(a){}}backupFile(e,t){if(this.isEnabled)try{Wt.recordChange({type:"backup",description:`Backup automático de ${e}`,code_before:t,impact:"low",affected_components:[e]})}catch(a){}}validateCodeChange(e,t,a){if(!this.isEnabled)return{safe:!0,removedFunctions:[]};const s=Wt.isSafeChange(t,a);if(!s.safe){const r=`⚠️ Alteração potencialmente perigosa: ${s.removedFunctions.length} funções foram removidas em ${e}. Funções removidas: ${s.removedFunctions.join(", ")}`;return Wt.recordChange({type:"unsafe_change",description:r,code_before:t,code_after:a,impact:"high",affected_components:[e]}),{...s,message:r}}return Wt.recordChange({type:"change",description:`Alteração segura em ${e}`,code_before:t,code_after:a,impact:"low",affected_components:[e]}),s}start(){this.isEnabled||(this.isEnabled=!0,Xt.setEnabled(!0),Gt.setEnabled(!0),Kt.setEnabled(!0),Wt.setEnabled(!0),this.startDataSync(),this.scheduleReports(),this.logEvent("agent_started",{timestamp:(new Date).toISOString()}))}stop(){this.isEnabled&&(this.isEnabled=!1,Xt.setEnabled(!1),Gt.setEnabled(!1),Kt.setEnabled(!1),Wt.setEnabled(!1),this.syncInterval&&(clearInterval(this.syncInterval),this.syncInterval=null),this.logEvent("agent_stopped",{timestamp:(new Date).toISOString()}))}getStatus(){return{enabled:this.isEnabled,lastSync:this.lastSyncTime,reportFrequency:this.reportEmailFrequency,components:{errorTracker:!0,codeOptimizer:!0,selfFixer:!0,codeChangeMonitor:!0}}}},Qt=N,ea=w,ta=a.forwardRef((({className:e,...t},a)=>s.jsx(g,{ref:a,className:lt("fixed inset-0 z-50 bg-black/50 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t})));ta.displayName=g.displayName;const aa=a.forwardRef((({className:e,children:t,...a},r)=>s.jsxs(ea,{children:[s.jsx(ta,{}),s.jsx(y,{ref:r,className:lt("fixed left-[50%] top-[50%] z-50 grid w-[95%] max-w-md translate-x-[-50%] translate-y-[-50%] gap-0 border bg-white p-0 shadow-xl duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-xl rounded-lg overflow-hidden",e),...a,children:t})]})));aa.displayName=y.displayName;const sa=({className:e,...t})=>s.jsx("div",{className:lt("bg-gradient-to-r from-purple-600 to-indigo-600 p-5 text-white",e),...t});sa.displayName="DialogHeader";const ra=({className:e,...t})=>s.jsx("div",{className:lt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-3 p-4 border-t border-gray-100 bg-gray-50",e),...t});ra.displayName="DialogFooter";const ia=a.forwardRef((({className:e,...t},a)=>s.jsx(v,{ref:a,className:lt("text-lg font-semibold text-white",e),...t})));ia.displayName=v.displayName;const na=a.forwardRef((({className:e,...t},a)=>s.jsx(j,{ref:a,className:lt("text-sm text-white/90",e),...t})));na.displayName=j.displayName;const oa=({className:e,...t})=>s.jsx("div",{className:lt("p-5 space-y-4",e),...t});oa.displayName="DialogBody";const la=a.memo((({isOpen:e,onOpenChange:t,onSelect:r})=>{const i=a.useCallback((()=>{t(!1)}),[t]),n=a.useCallback((()=>{r("meeting"),t(!1)}),[r,t]),o=a.useCallback((()=>{r("task"),t(!1)}),[r,t]),d=a.useCallback((()=>{r("event"),t(!1)}),[r,t]),c=a.useCallback((()=>{r("habit"),t(!1)}),[r,t]);return s.jsx(Qt,{open:e,onOpenChange:t,children:s.jsxs(aa,{className:"max-w-md w-[95%] mx-auto rounded-xl p-0 border-0 shadow-xl overflow-hidden",children:[s.jsxs(sa,{className:"space-y-2 bg-gradient-to-r from-purple-600 to-indigo-600 p-5 relative",children:[s.jsx(St,{variant:"ghost",size:"icon",onClick:i,className:"rounded-full absolute right-3 top-3 text-white hover:bg-white/20",children:s.jsx(l,{className:"h-4 w-4"})}),s.jsx(ia,{className:"text-xl font-bold text-white",children:"O que você quer criar?"})]}),s.jsxs("div",{className:"p-5 grid grid-cols-1 gap-4",children:[s.jsxs(St,{variant:"outline",className:"flex items-center justify-start gap-4 p-4 h-auto text-left rounded-lg border-gray-200 hover:border-indigo-300 hover:bg-indigo-50",onClick:n,children:[s.jsx("div",{className:"min-w-12 min-h-12 w-12 h-12 rounded-full bg-indigo-100 flex items-center justify-center shrink-0",children:s.jsx(L,{className:"h-6 w-6 text-indigo-600"})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-medium text-gray-900 text-base",children:"Reunião"}),s.jsx("span",{className:"text-sm text-gray-600",children:"Agende uma nova reunião"})]})]}),s.jsxs(St,{variant:"outline",className:"flex items-center justify-start gap-4 p-4 h-auto text-left rounded-lg border-gray-200 hover:border-purple-300 hover:bg-purple-50",onClick:o,children:[s.jsx("div",{className:"min-w-12 min-h-12 w-12 h-12 rounded-full bg-purple-100 flex items-center justify-center shrink-0",children:s.jsx(H,{className:"h-6 w-6 text-purple-600"})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-medium text-gray-900 text-base",children:"Tarefa"}),s.jsx("span",{className:"text-sm text-gray-600",children:"Crie uma tarefa para seu dia"})]})]}),s.jsxs(St,{variant:"outline",className:"flex items-center justify-start gap-4 p-4 h-auto text-left rounded-lg border-gray-200 hover:border-green-300 hover:bg-green-50",onClick:d,children:[s.jsx("div",{className:"min-w-12 min-h-12 w-12 h-12 rounded-full bg-green-100 flex items-center justify-center shrink-0",children:s.jsx(V,{className:"h-6 w-6 text-green-600"})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-medium text-gray-900 text-base",children:"Evento"}),s.jsx("span",{className:"text-sm text-gray-600",children:"Registre um evento"})]})]}),s.jsxs(St,{variant:"outline",className:"flex items-center justify-start gap-4 p-4 h-auto text-left rounded-lg border-gray-200 hover:border-amber-300 hover:bg-amber-50",onClick:c,children:[s.jsx("div",{className:"min-w-12 min-h-12 w-12 h-12 rounded-full bg-amber-100 flex items-center justify-center shrink-0",children:s.jsx(B,{className:"h-6 w-6 text-amber-600"})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-medium text-gray-900 text-base",children:"Hábito"}),s.jsx("span",{className:"text-sm text-gray-600",children:"Adicione um hábito para sua rotina"})]})]})]})]})})})),da=a.forwardRef((({className:e,type:t,...a},r)=>s.jsx("input",{type:t,className:lt("flex h-10 w-full rounded-lg border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...a})));da.displayName="Input";const ca=a.forwardRef((({className:e,...t},a)=>s.jsx("textarea",{className:lt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...t})));ca.displayName="Textarea";const ua=ze("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ma=a.forwardRef((({className:e,...t},a)=>s.jsx(J,{ref:a,className:lt(ua(),e),...t})));ma.displayName=J.displayName;const ha=({isOpen:e,onOpenChange:t,onSuccess:r})=>{const[i,n]=a.useState(""),[o,d]=a.useState(""),[c,u]=a.useState(30),[m,h]=a.useState(""),[p,f]=a.useState("#5AC8FA"),[x,g]=a.useState(""),[y,b]=a.useState(!1),{toast:v}=nt(),j=()=>{n(""),d(""),u(30),h(""),f("#5AC8FA"),g(""),b(!1)},w=()=>{j(),t(!1)};return s.jsx(Qt,{open:e,onOpenChange:t,children:s.jsxs(aa,{className:"max-w-md p-0 overflow-hidden bg-white rounded-3xl mx-auto animate-fadeIn shadow-xl",children:[s.jsxs(sa,{className:"px-6 pt-6 pb-3 flex justify-between items-center border-b border-gray-100 bg-gradient-to-r from-indigo-500 to-blue-500 text-white relative",children:[s.jsx(St,{variant:"ghost",size:"icon",onClick:w,className:"rounded-full absolute right-4 top-4 text-white hover:bg-white/20",children:s.jsx(l,{className:"h-6 w-6"})}),s.jsx(ia,{className:"text-2xl font-bold",children:"Nova Reunião"})]}),s.jsx(oa,{className:"p-6 space-y-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ma,{htmlFor:"meeting-title",className:"text-gray-700",children:["Título da Reunião ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(da,{id:"meeting-title",value:i,onChange:e=>n(e.target.value),placeholder:"Título da reunião",className:"w-full border-gray-300 focus:border-indigo-500",autoFocus:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ma,{htmlFor:"meeting-time",className:"text-gray-700",children:"Horário da Reunião"}),s.jsx(da,{id:"meeting-time",type:"time",value:o,onChange:e=>d(e.target.value),className:"w-full border-gray-300 focus:border-indigo-500"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Se não preenchido, a reunião será registrada sem horário fixo."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ma,{className:"text-gray-700",children:"Duração da Reunião"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:15,label:"15min"},{value:30,label:"30min"},{value:45,label:"45min"},{value:60,label:"1h"},{value:90,label:"1h30"},{value:120,label:"2h"}].map((e=>s.jsx("button",{className:lt("px-3 py-2 rounded-full text-sm font-medium transition-colors",c===e.value?"bg-indigo-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>u(e.value),children:e.label},e.value)))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ma,{htmlFor:"meeting-link",className:"text-gray-700",children:"Link da Reunião"}),s.jsx(da,{id:"meeting-link",value:m,onChange:e=>h(e.target.value),placeholder:"https://meet.google.com/...",className:"w-full border-gray-300 focus:border-indigo-500"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Adicione um link de videoconferência (opcional)."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ma,{className:"text-gray-700",children:"Categoria da Reunião"}),s.jsx("div",{className:"flex space-x-4 py-2",children:[{value:"#5AC8FA",label:"Azul",description:"Trabalho"},{value:"#4CD964",label:"Verde",description:"Estudo"},{value:"#FF9500",label:"Laranja",description:"Social"},{value:"#9b87f5",label:"Roxo",description:"Projetos"}].map((e=>s.jsxs("div",{className:"flex flex-col items-center gap-1 cursor-pointer",onClick:()=>f(e.value),children:[s.jsx("div",{className:"w-10 h-10 rounded-full transition-all duration-200 "+(p===e.value?"ring-2 ring-offset-2 ring-indigo-500":""),style:{backgroundColor:e.value}}),s.jsx("span",{className:"text-xs text-gray-600",children:e.description})]},e.value)))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ma,{htmlFor:"meeting-details",className:"text-gray-700",children:"Detalhes da Reunião"}),s.jsx(ca,{id:"meeting-details",value:x,onChange:e=>g(e.target.value),placeholder:"Adicione detalhes importantes sobre a reunião...",className:"min-h-[100px] w-full border-gray-300 focus:border-indigo-500"})]})]})}),s.jsx(ra,{className:"p-6 border-t border-gray-100",children:s.jsxs("div",{className:"flex gap-3 w-full",children:[s.jsx(St,{variant:"outline",onClick:w,className:"flex-1",children:"Cancelar"}),s.jsx(St,{onClick:async()=>{if(i.trim())if(m&&((e=m)&&!/^(https?:\/\/)?([\w-]+(\.[\w-]+)+|localhost)(:\d+)?(\/\S*)?$/.test(e)))v({variant:"destructive",title:"Erro",description:"Por favor, insira um link de reunião válido."});else{var e;b(!0);try{const{data:{user:e}}=await Dt.auth.getUser();if(!e)throw new Error("Usuário não autenticado");const{error:a}=await Dt.from("tasks").insert({title:i,scheduled_date:He(new Date,"yyyy-MM-dd"),start_time:o||null,duration:c,color:p,details:x,meeting_link:m||null,completed:!1,type:"meeting",user_id:e.id});if(a)throw a;v({title:"Reunião criada!",description:"Sua reunião foi adicionada com sucesso."}),j(),t(!1),r&&r()}catch(a){v({variant:"destructive",title:"Erro",description:"Não foi possível criar a reunião. Tente novamente."})}finally{b(!1)}}else v({variant:"destructive",title:"Erro",description:"O título da reunião é obrigatório."})},className:"flex-1 bg-gradient-to-r from-indigo-500 to-blue-500",disabled:y||!i.trim(),children:y?"Criando...":"Criar Reunião"})]})})]})})},pa=({onSuccess:e,onClose:t})=>{const[r,i]=a.useState(""),[n,o]=a.useState(""),[l,d]=a.useState(15),[c,u]=a.useState("#9b87f5"),[m,h]=a.useState(""),[p,f]=a.useState(null),[x,g]=a.useState([]),[y,b]=a.useState(""),[v,j]=a.useState(!1),{toast:w}=nt();return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx(fa,{title:r,onChange:i}),s.jsx(xa,{time:n,onChange:o}),s.jsx(ga,{duration:l,onChange:d}),s.jsx(ya,{priority:p,onChange:f}),s.jsx(ba,{color:c,onChange:u}),s.jsx(va,{subtasks:x,newSubtask:y,onNewSubtaskChange:b,onAddSubtask:()=>{y.trim()&&(g([...x,y.trim()]),b(""))},onRemoveSubtask:e=>{const t=[...x];t.splice(e,1),g(t)}}),s.jsx(ja,{details:m,onChange:h})]}),s.jsxs("div",{className:"flex gap-3 w-full mt-6",children:[s.jsx(St,{variant:"outline",onClick:t,className:"flex-1",type:"button",children:"Cancelar"}),s.jsx(St,{onClick:async()=>{if(r.trim()){j(!0);try{const{data:{user:a}}=await Dt.auth.getUser();if(!a)throw new Error("Usuário não autenticado");const s="high"===p||"medium"===p||"low"===p?p:null,y={title:r,scheduled_date:He(new Date,"yyyy-MM-dd"),start_time:n||null,duration:l,color:c,details:m,priority:s,completed:!1,type:"task",user_id:a.id},{data:v,error:N}=await Dt.from("tasks").insert(y).select();if(N)throw N;if(x.length>0&&v&&v[0]){const e=v[0].id,t=x.map(((t,a)=>({task_id:e,title:t,completed:!1,order_index:a}))),{error:a}=await Dt.from("subtasks").insert(t);a&&w({variant:"destructive",title:"Aviso",description:"Tarefa criada, mas houve um erro ao adicionar as subtarefas."})}w({title:"Sucesso!",description:"Tarefa criada com sucesso."}),i(""),o(""),d(15),u("#9b87f5"),h(""),f(null),g([]),b(""),j(!1),t(),e&&e()}catch(a){let e="Não foi possível criar a tarefa. Tente novamente.";a.message.includes("tasks_priority_check")&&(e="Prioridade inválida selecionada. Use apenas: Alta, Média ou Baixa."),w({variant:"destructive",title:"Erro",description:e})}finally{j(!1)}}else w({variant:"destructive",title:"Erro",description:"O título da tarefa é obrigatório."})},className:"flex-1 bg-gradient-to-r from-purple-500 to-indigo-600",disabled:v||!r.trim(),type:"button",children:v?"Criando...":"Criar Tarefa"})]})]})},fa=({title:e,onChange:t})=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ma,{htmlFor:"task-title",className:"text-gray-700",children:["Título da Tarefa ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(da,{id:"task-title",value:e,onChange:e=>t(e.target.value),placeholder:"Digite o nome da tarefa",className:"w-full border-gray-300 focus:border-purple-500",autoFocus:!0})]}),xa=({time:e,onChange:t})=>s.jsxs("div",{className:"space-y-2",children:[s.jsx(ma,{htmlFor:"task-time",className:"text-gray-700",children:"Horário da Tarefa"}),s.jsx(da,{id:"task-time",type:"time",value:e,onChange:e=>t(e.target.value),className:"w-full border-gray-300 focus:border-purple-500"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Se não preenchido, a tarefa será registrada sem horário definido."})]}),ga=({duration:e,onChange:t})=>s.jsxs("div",{className:"space-y-2",children:[s.jsx(ma,{className:"text-gray-700",children:"Tempo de Duração"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:15,label:"15min"},{value:30,label:"30min"},{value:45,label:"45min"},{value:60,label:"1h"},{value:90,label:"1h30"}].map((a=>s.jsx("button",{className:lt("px-3 py-2 rounded-full text-sm font-medium transition-colors",e===a.value?"bg-purple-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>t(a.value),type:"button",children:a.label},a.value)))})]}),ya=({priority:e,onChange:t})=>s.jsxs("div",{className:"space-y-2",children:[s.jsx(ma,{className:"text-gray-700",children:"Prioridade da Tarefa"}),s.jsx("div",{className:"flex gap-2",children:[{value:"high",label:"Alta prioridade",color:"#EA4335"},{value:"medium",label:"Média prioridade",color:"#FBBC04"},{value:"low",label:"Baixa prioridade",color:"#34A853"}].map((a=>s.jsxs("button",{type:"button",className:lt("flex items-center gap-1 px-3 py-2 rounded-lg text-sm font-medium border transition-colors flex-1",e===a.value?"border-2 "+("high"===a.value?"border-red-500 bg-red-50 text-red-700":"medium"===a.value?"border-amber-500 bg-amber-50 text-amber-700":"border-green-500 bg-green-50 text-green-700"):"border-gray-200 hover:bg-gray-50"),onClick:()=>t(a.value),children:[s.jsx(Z,{className:"h-4 w-4"}),a.label]},a.value)))})]}),ba=({color:e,onChange:t})=>s.jsxs("div",{className:"space-y-2",children:[s.jsx(ma,{className:"text-gray-700",children:"Cor da Tarefa"}),s.jsx("div",{className:"flex space-x-4 py-2",children:[{value:"#EA4335",label:"Vermelho",description:"Urgente"},{value:"#FBBC04",label:"Amarelo",description:"Moderado"},{value:"#34A853",label:"Verde",description:"Baixa"},{value:"#9b87f5",label:"Roxo",description:"Normal"}].map((a=>s.jsxs("div",{className:"flex flex-col items-center gap-1 cursor-pointer",onClick:()=>t(a.value),children:[s.jsx("div",{className:"w-10 h-10 rounded-full transition-all duration-200 "+(e===a.value?"ring-2 ring-offset-2 ring-purple-500":""),style:{backgroundColor:a.value}}),s.jsx("span",{className:"text-xs text-gray-600",children:a.description})]},a.value)))})]}),va=({subtasks:e,newSubtask:t,onNewSubtaskChange:a,onAddSubtask:r,onRemoveSubtask:i})=>s.jsxs("div",{className:"space-y-2",children:[s.jsx(ma,{className:"text-gray-700",children:"Subtarefas"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(da,{value:t,onChange:e=>a(e.target.value),placeholder:"Adicionar subtarefa",className:"flex-1 border-gray-300 focus:border-purple-500",onKeyDown:e=>"Enter"===e.key&&r()}),s.jsx(St,{onClick:r,disabled:!t.trim(),variant:"outline",type:"button",children:"Adicionar"})]}),e.length>0&&s.jsx("div",{className:"mt-2 space-y-2",children:e.map(((e,t)=>s.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded-md",children:[s.jsx("span",{className:"text-sm text-gray-700",children:e}),s.jsx(St,{variant:"ghost",size:"sm",onClick:()=>i(t),className:"h-8 w-8 p-0 text-red-500 hover:bg-red-50",type:"button",children:s.jsx(l,{className:"h-4 w-4"})})]},t)))})]}),ja=({details:e,onChange:t})=>s.jsxs("div",{className:"space-y-2",children:[s.jsx(ma,{htmlFor:"task-details",className:"text-gray-700",children:"Detalhes Extras"}),s.jsx(ca,{id:"task-details",value:e,onChange:e=>t(e.target.value),placeholder:"Adicione links, observações ou informações adicionais...",className:"min-h-[100px] w-full border-gray-300 focus:border-purple-500"})]}),wa=({isOpen:e,onOpenChange:t,onSuccess:a})=>s.jsx(Qt,{open:e,onOpenChange:t,children:s.jsxs(aa,{className:"sm:max-w-[500px] max-h-[90vh] overflow-y-auto",children:[s.jsx(sa,{children:s.jsx(ia,{children:"Nova Tarefa"})}),s.jsx(pa,{onClose:()=>t(!1),onSuccess:a})]})}),Na=({isOpen:e,onOpenChange:t,onSuccess:r})=>{const[i,n]=a.useState(""),[o,d]=a.useState(""),[c,u]=a.useState(60),[m,h]=a.useState("#4CD964"),[p,f]=a.useState(""),[x,g]=a.useState(""),[y,b]=a.useState(!1),{toast:v}=nt(),j=()=>{n(""),d(""),u(60),h("#4CD964"),f(""),g(""),b(!1)},w=()=>{j(),t(!1)};return s.jsx(Qt,{open:e,onOpenChange:t,children:s.jsxs(aa,{className:"max-w-md p-0 overflow-hidden bg-white rounded-3xl mx-auto animate-fadeIn shadow-xl",children:[s.jsxs(sa,{className:"px-6 pt-6 pb-3 flex justify-between items-center border-b border-gray-100 bg-gradient-to-r from-green-500 to-emerald-500 text-white relative",children:[s.jsx(St,{variant:"ghost",size:"icon",onClick:w,className:"rounded-full absolute right-4 top-4 text-white hover:bg-white/20",children:s.jsx(l,{className:"h-6 w-6"})}),s.jsx(ia,{className:"text-2xl font-bold",children:"Novo Evento"})]}),s.jsx(oa,{className:"p-6 space-y-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ma,{htmlFor:"event-title",className:"text-gray-700",children:["Título do Evento ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(da,{id:"event-title",value:i,onChange:e=>n(e.target.value),placeholder:"Título do evento",className:"w-full border-gray-300 focus:border-green-500",autoFocus:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ma,{htmlFor:"event-time",className:"text-gray-700",children:"Horário do Evento"}),s.jsx(da,{id:"event-time",type:"time",value:o,onChange:e=>d(e.target.value),className:"w-full border-gray-300 focus:border-green-500"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ma,{className:"text-gray-700",children:"Duração do Evento"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:15,label:"15min"},{value:30,label:"30min"},{value:60,label:"1h"},{value:90,label:"1h30"},{value:120,label:"2h"},{value:180,label:"3h"}].map((e=>s.jsx("button",{className:lt("px-3 py-2 rounded-full text-sm font-medium transition-colors",c===e.value?"bg-green-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>u(e.value),children:e.label},e.value)))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ma,{htmlFor:"event-location",className:"text-gray-700",children:"Local do Evento"}),s.jsx(da,{id:"event-location",value:x,onChange:e=>g(e.target.value),placeholder:"Local do evento",className:"w-full border-gray-300 focus:border-green-500"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ma,{className:"text-gray-700",children:"Categoria do Evento"}),s.jsx("div",{className:"flex space-x-4 py-2",children:[{value:"#9b87f5",label:"Roxo",description:"Reunião"},{value:"#FF9500",label:"Laranja",description:"Social"},{value:"#FFCC33",label:"Amarelo",description:"Estudo"},{value:"#4CD964",label:"Verde",description:"Saúde"}].map((e=>s.jsxs("div",{className:"flex flex-col items-center gap-1 cursor-pointer",onClick:()=>h(e.value),children:[s.jsx("div",{className:"w-10 h-10 rounded-full transition-all duration-200 "+(m===e.value?"ring-2 ring-offset-2 ring-green-500":""),style:{backgroundColor:e.value}}),s.jsx("span",{className:"text-xs text-gray-600",children:e.description})]},e.value)))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ma,{htmlFor:"event-details",className:"text-gray-700",children:"Descrição e Detalhes"}),s.jsx(ca,{id:"event-details",value:p,onChange:e=>f(e.target.value),placeholder:"Adicione informações sobre o evento...",className:"min-h-[100px] w-full border-gray-300 focus:border-green-500"})]})]})}),s.jsx(ra,{className:"p-6 border-t border-gray-100",children:s.jsxs("div",{className:"flex gap-3 w-full",children:[s.jsx(St,{variant:"outline",onClick:w,className:"flex-1",children:"Cancelar"}),s.jsx(St,{onClick:async()=>{if(i.trim()){b(!0);try{const{data:{user:e}}=await Dt.auth.getUser();if(!e)throw new Error("Usuário não autenticado");const{error:a}=await Dt.from("tasks").insert({title:i,scheduled_date:He(new Date,"yyyy-MM-dd"),start_time:o||null,duration:c,color:m,details:p,location:x,completed:!1,type:"event",user_id:e.id});if(a)throw a;v({title:"Evento criado!",description:"Seu evento foi adicionado com sucesso."}),j(),t(!1),r&&r()}catch(e){v({variant:"destructive",title:"Erro",description:"Não foi possível criar o evento. Tente novamente."})}finally{b(!1)}}else v({variant:"destructive",title:"Erro",description:"O título do evento é obrigatório."})},className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-500",disabled:y||!i.trim(),children:y?"Criando...":"Criar Evento"})]})})]})})};function ka({onOpenChange:e,onSuccess:t,userId:s}){const[r,i]=a.useState(""),[n,o]=a.useState(""),[l,d]=a.useState("daily"),[c,u]=a.useState("08:00"),[m,h]=a.useState("health"),[p,f]=a.useState(30),[x,g]=a.useState(new Date),[y,b]=a.useState(!1),{toast:v}=nt(),j=async(e,t)=>{if(!s)return!1;try{const{data:a,error:r}=await Dt.from("tasks").select("id").eq("user_id",s).eq("title",e).eq("scheduled_date",t).eq("type","habit").single();return(!r||"PGRST116"===r.code)&&!!a}catch(a){return!1}};return{formState:{title:r,description:n,frequency:l,time:c,area:m,duration:p,date:x,isSubmitting:y},setters:{setTitle:i,setDescription:o,setFrequency:d,setTime:u,setArea:h,setDuration:f,setDate:g},handleSubmit:async a=>{if(a.preventDefault(),s){b(!0);try{const a=He(x,"yyyy-MM-dd");if(await j(r,a))return v({title:"Aviso",description:"Já existe um hábito com este título programado para esta data",variant:"destructive"}),void b(!1);let o="medium";"once"!==l&&("daily"===l?o="high":"weekly"===l?o="medium":"monthly"===l&&(o="low"));const d={id:qe(),title:r,details:n,type:"habit",start_time:c,duration:p,color:(i=m,{health:"#10b981",business:"#3b82f6",family:"#6366f1",spirituality:"#eab308",finances:"#a855f7"}[i]||"#6b7280"),completed:!1,scheduled_date:He(x,"yyyy-MM-dd"),created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),user_id:s,priority:o},u={id:qe(),title:r,description:n,category:m,frequency:l,start_time:c,duration_days:"daily"===l?30:"weekly"===l?84:"monthly"===l?180:1,scheduled_date:He(x,"yyyy-MM-dd"),completed:!1,created_at:(new Date).toISOString(),user_id:s};await(async e=>{const t=[],a=He(x,"yyyy-MM-dd"),s=new Date(a);t.push({...e,scheduled_date:a});try{if("daily"===l)for(let r=1;r<=30;r++){const a=Ve(s,r),i=He(a,"yyyy-MM-dd");await j(e.title,i)||t.push({...e,id:qe(),scheduled_date:i})}else if("weekly"===l)for(let r=1;r<=12;r++){const a=Be(s,r),i=He(a,"yyyy-MM-dd");await j(e.title,i)||t.push({...e,id:qe(),scheduled_date:i})}else if("monthly"===l)for(let r=1;r<=6;r++){const a=Je(s,r),i=He(a,"yyyy-MM-dd");await j(e.title,i)||t.push({...e,id:qe(),scheduled_date:i})}if(0===t.length)return;const{error:a}=await Dt.from("tasks").insert(t);if(a)throw a}catch(r){throw r}})(d);const{error:h}=await Dt.from("daily_routines").insert([u]);if(h)throw h;v({title:"Hábito criado",description:`Seu novo hábito "${r}" foi adicionado com sucesso à sua agenda e será repetido ${"daily"===l?"diariamente":"weekly"===l?"semanalmente":"mensalmente"}!`,duration:5e3}),e(!1),null==t||t()}catch(o){v({title:"Erro",description:o.message||"Ocorreu um erro ao criar o hábito",variant:"destructive"})}finally{b(!1)}var i}else v({title:"Erro",description:"Você precisa estar logado para criar um hábito",variant:"destructive"})}}}const Ca=de,Sa=ce,Ea=a.forwardRef((({className:e,children:t,...a},r)=>s.jsxs(X,{ref:r,className:lt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[t,s.jsx(G,{asChild:!0,children:s.jsx(K,{className:"h-4 w-4 opacity-50"})})]})));Ea.displayName=X.displayName;const Ta=a.forwardRef((({className:e,...t},a)=>s.jsx(W,{ref:a,className:lt("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Y,{className:"h-4 w-4"})})));Ta.displayName=W.displayName;const _a=a.forwardRef((({className:e,...t},a)=>s.jsx(Q,{ref:a,className:lt("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(K,{className:"h-4 w-4"})})));_a.displayName=Q.displayName;const Da=a.forwardRef((({className:e,children:t,position:a="popper",...r},i)=>s.jsx(ee,{children:s.jsxs(te,{ref:i,className:lt("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...r,children:[s.jsx(Ta,{}),s.jsx(ae,{className:lt("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(_a,{})]})})));Da.displayName=te.displayName;a.forwardRef((({className:e,...t},a)=>s.jsx(se,{ref:a,className:lt("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}))).displayName=se.displayName;const Oa=a.forwardRef((({className:e,children:t,...a},r)=>s.jsxs(re,{ref:r,className:lt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(ie,{children:s.jsx(ne,{className:"h-4 w-4"})})}),s.jsx(oe,{children:t})]})));Oa.displayName=re.displayName;a.forwardRef((({className:e,...t},a)=>s.jsx(le,{ref:a,className:lt("-mx-1 my-1 h-px bg-muted",e),...t}))).displayName=le.displayName;const Ia=he,Aa=pe,Fa=a.forwardRef((({className:e,align:t="center",sideOffset:a=4,...r},i)=>s.jsx(ue,{children:s.jsx(me,{ref:i,align:t,sideOffset:a,className:lt("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})})));function Ra({className:e,classNames:t,showOutsideDays:a=!0,...r}){return s.jsx(fe,{showOutsideDays:a,className:lt("p-0 pointer-events-auto",e),classNames:{months:"flex flex-col sm:flex-row space-y-3 sm:space-x-3 sm:space-y-0",month:"space-y-2",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-xs font-medium",nav:"space-x-1 flex items-center",nav_button:lt(Ct({variant:"outline"}),"h-6 w-6 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-7 font-normal text-[0.7rem]",row:"flex w-full mt-1",cell:"h-7 w-7 text-center text-xs p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:lt(Ct({variant:"ghost"}),"h-7 w-7 p-0 font-normal text-xs aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...e})=>s.jsx(xe,{className:"h-3 w-3"}),IconRight:({...e})=>s.jsx(I,{className:"h-3 w-3"})},...r})}Fa.displayName=me.displayName,Ra.displayName="Calendar";const za=({value:e,onChange:t})=>s.jsxs("div",{className:"space-y-2",children:[s.jsx(ma,{htmlFor:"title",children:"Nome do Hábito"}),s.jsx(da,{id:"title",placeholder:"Ex: Ler 20 páginas",value:e,onChange:e=>t(e.target.value),required:!0,className:"w-full"})]}),Ma=({value:e,onChange:t})=>s.jsxs("div",{className:"space-y-2",children:[s.jsx(ma,{htmlFor:"description",children:"Descrição (opcional)"}),s.jsx(ca,{id:"description",placeholder:"Por que este hábito é importante para você?",value:e,onChange:e=>t(e.target.value),rows:3,className:"resize-none"})]}),La=({area:e,frequency:t,onAreaChange:a,onFrequencyChange:r})=>s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ma,{htmlFor:"area",children:"Área"}),s.jsxs(Ca,{value:e,onValueChange:a,children:[s.jsx(Ea,{id:"area",className:"w-full",children:s.jsx(Sa,{placeholder:"Selecione uma área"})}),s.jsxs(Da,{children:[s.jsx(Oa,{value:"health",children:"Saúde"}),s.jsx(Oa,{value:"business",children:"Trabalho"}),s.jsx(Oa,{value:"family",children:"Família"}),s.jsx(Oa,{value:"spirituality",children:"Espiritualidade"}),s.jsx(Oa,{value:"finances",children:"Finanças"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ma,{htmlFor:"frequency",children:"Frequência"}),s.jsxs(Ca,{value:t,onValueChange:r,children:[s.jsx(Ea,{id:"frequency",className:"w-full",children:s.jsx(Sa,{placeholder:"Selecione uma frequência"})}),s.jsxs(Da,{children:[s.jsx(Oa,{value:"once",children:"Única vez"}),s.jsx(Oa,{value:"daily",children:"Diário"}),s.jsx(Oa,{value:"weekly",children:"Semanal"}),s.jsx(Oa,{value:"monthly",children:"Mensal"})]})]})]})]}),Pa=({date:e,time:t,onDateChange:a,onTimeChange:r})=>s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ma,{htmlFor:"date",children:"Data de Início"}),s.jsxs(Ia,{children:[s.jsx(Aa,{asChild:!0,children:s.jsxs(St,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[s.jsx(ge,{className:"mr-2 h-4 w-4"}),He(e,"dd/MM/yyyy")]})}),s.jsx(Fa,{className:"w-auto p-0 z-50",align:"start",children:s.jsx(Ra,{mode:"single",selected:e,onSelect:e=>e&&a(e),initialFocus:!0,classNames:{day:"text-center p-0 h-7 w-7 text-xs rounded-md hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground data-[selected]:bg-primary data-[selected]:text-primary-foreground"}})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ma,{htmlFor:"time",children:"Horário"}),s.jsx(da,{id:"time",type:"time",value:t,onChange:e=>r(e.target.value),className:"w-full"})]})]}),qa=({value:e,onChange:t})=>s.jsxs("div",{className:"space-y-2",children:[s.jsx(ma,{htmlFor:"duration",children:"Duração (minutos)"}),s.jsx(da,{id:"duration",type:"number",min:"5",max:"240",value:e,onChange:e=>t(Number(e.target.value)),className:"w-full"})]}),Ua=({onCancel:e,isSubmitting:t})=>s.jsxs(s.Fragment,{children:[s.jsx(St,{variant:"outline",type:"button",onClick:e,disabled:t,children:"Cancelar"}),s.jsx(St,{type:"submit",disabled:t,children:t?"Salvando...":"Salvar Hábito"})]});function $a({onOpenChange:e,onSuccess:t,userId:a}){var r;const i=Jt(),n=a||(null==(r=null==i?void 0:i.user)?void 0:r.id)||null,{formState:{title:o,description:l,frequency:d,time:c,area:u,duration:m,date:h,isSubmitting:p},setters:{setTitle:f,setDescription:x,setFrequency:g,setTime:y,setArea:b,setDuration:v,setDate:j},handleSubmit:w}=ka({onOpenChange:e,onSuccess:t,userId:n||void 0});return s.jsx(s.Fragment,{children:s.jsx(oa,{children:s.jsxs("form",{onSubmit:w,className:"space-y-5",children:[s.jsx(za,{value:o,onChange:f}),s.jsx(Ma,{value:l,onChange:x}),s.jsx(La,{area:u,frequency:d,onAreaChange:b,onFrequencyChange:g}),s.jsx(Pa,{date:h,time:c,onDateChange:e=>e&&j(e),onTimeChange:y}),s.jsx(qa,{value:m,onChange:v}),s.jsx(ra,{className:"px-0 pb-0 pt-2",children:s.jsx(Ua,{onCancel:()=>e(!1),isSubmitting:p})})]})})})}function Ha({isOpen:e,onOpenChange:t,onSuccess:a,userId:r}){return s.jsx(Qt,{open:e,onOpenChange:t,children:s.jsxs(aa,{className:"sm:max-w-[500px] p-0",children:[s.jsxs(sa,{children:[s.jsx(ia,{className:"text-xl font-semibold",children:"Novo Hábito"}),s.jsx(na,{children:"Adicione um novo hábito para acompanhar seu progresso"})]}),s.jsx($a,{onOpenChange:t,onSuccess:()=>{a&&a()},userId:r})]})})}const Va=({isToday:e,setIsToday:t,hasDueDate:a,setHasDueDate:r,isPriority:i,setIsPriority:n,hasReminder:o,setHasReminder:l})=>s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs(St,{type:"button",variant:e?"eventTypeTabActive":"eventTypeTab",className:"gap-2 px-4 py-2 border text-sm rounded-full "+(e?"bg-green-500 text-white border-green-500":"bg-white text-gray-600 border-gray-200"),onClick:()=>t(!e),children:[s.jsx(ge,{className:"w-4 h-4"}),s.jsx("span",{children:"Hoje"})]}),s.jsxs(St,{type:"button",variant:a?"eventTypeTabActive":"eventTypeTab",className:"gap-2 px-4 py-2 border text-sm rounded-full "+(a?"bg-gray-600 text-white border-gray-600":"bg-white text-gray-600 border-gray-200"),onClick:()=>r(!a),children:[s.jsx(ye,{className:"w-4 h-4"}),s.jsx("span",{children:"Prazo"})]}),s.jsxs(St,{type:"button",variant:i?"eventTypeTabActive":"eventTypeTab",className:"gap-2 px-4 py-2 border text-sm rounded-full "+(i?"bg-red-500 text-white border-red-500":"bg-white text-gray-600 border-gray-200"),onClick:()=>n(!i),children:[s.jsx(be,{className:"w-4 h-4"}),s.jsx("span",{children:"Prioridade"})]}),s.jsxs(St,{type:"button",variant:o?"eventTypeTabActive":"eventTypeTab",className:"gap-2 px-4 py-2 border text-sm rounded-full "+(o?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-600 border-gray-200"),onClick:()=>l(!o),children:[s.jsx(ve,{className:"w-4 h-4"}),s.jsx("span",{children:"Lembretes"})]})]}),Ba=({category:e,setCategory:t})=>s.jsxs("div",{className:"pt-3 border-t border-gray-100",children:[s.jsx(ma,{htmlFor:"category",className:"block text-sm font-medium text-gray-500 mb-2",children:"Categoria"}),s.jsxs(Ca,{value:e,onValueChange:t,children:[s.jsx(Ea,{className:"w-full border border-gray-200 bg-white",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(M,{className:"h-4 w-4 text-gray-500"}),s.jsx(Sa,{placeholder:"Selecione uma categoria"})]})}),s.jsxs(Da,{children:[s.jsx(Oa,{value:"inbox",children:"Entrada"}),s.jsx(Oa,{value:"draft",children:"Rascunho"}),s.jsx(Oa,{value:"personal",children:"Pessoal"}),s.jsx(Oa,{value:"work",children:"Trabalho"}),s.jsx(Oa,{value:"study",children:"Estudos"})]})]})]}),Ja=({title:e,setTitle:t,description:a,setDescription:r,isToday:i,setIsToday:n,hasDueDate:o,setHasDueDate:l,isPriority:d,setIsPriority:c,hasReminder:u,setHasReminder:m,category:h,setCategory:p})=>s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{children:s.jsx(da,{placeholder:"Digite sua nota...",value:e,onChange:e=>t(e.target.value),className:"text-base border border-gray-200 focus:border-purple-400"})}),s.jsx("div",{children:s.jsx(ca,{placeholder:"Descrição (Opcional)",value:a,onChange:e=>r(e.target.value),className:"min-h-[80px] border border-gray-200 focus:border-purple-400"})}),s.jsx(Va,{isToday:i,setIsToday:n,hasDueDate:o,setHasDueDate:l,isPriority:d,setIsPriority:c,hasReminder:u,setHasReminder:m}),s.jsx(Ba,{category:h,setCategory:p})]}),Za=async e=>await Dt.from("notes").insert(e),Xa=({isOpen:e,onOpenChange:t,onSuccess:r})=>{const{title:i,setTitle:n,description:o,setDescription:d,isToday:c,setIsToday:u,hasDueDate:m,setHasDueDate:h,isPriority:p,setIsPriority:f,hasReminder:x,setHasReminder:g,category:y,setCategory:b,isCreating:v,handleClose:j,handleSave:w}=((e,t)=>{const[s,r]=a.useState(""),[i,n]=a.useState(""),[o,l]=a.useState(!1),[d,c]=a.useState(!1),[u,m]=a.useState(!1),[h,p]=a.useState(!1),[f,x]=a.useState("inbox"),[g,y]=a.useState(!1),{toast:b}=nt(),v=()=>{r(""),n(""),l(!1),c(!1),m(!1),p(!1),x("inbox"),y(!1)};return{title:s,setTitle:r,description:i,setDescription:n,isToday:o,setIsToday:l,hasDueDate:d,setHasDueDate:c,isPriority:u,setIsPriority:m,hasReminder:h,setHasReminder:p,category:f,setCategory:x,isCreating:g,handleClose:()=>{v(),t&&t()},handleSave:async()=>{if(s.trim()){y(!0);try{const{data:a}=await Dt.auth.getUser();if(!a.user)throw new Error("User not authenticated");const{error:r}=await Za({title:s,description:i||null,is_today:o,has_due_date:d,is_priority:u,has_reminder:h,category:f,user_id:a.user.id,created_at:(new Date).toISOString()});if(r)throw r;b({title:"Nota salva com sucesso!",description:"Sua nota foi adicionada como rascunho."}),v(),t&&t(),e&&e()}catch(a){b({title:"Erro ao salvar nota",description:"Ocorreu um erro ao tentar salvar sua nota. Tente novamente.",variant:"destructive"})}finally{y(!1)}}}}})(r,(()=>t(!1)));return s.jsx(Qt,{open:e,onOpenChange:t,children:s.jsxs(aa,{className:"w-[95%] max-w-md mx-auto rounded-lg p-0 border-0 shadow-xl overflow-hidden",children:[s.jsxs(sa,{className:"py-3 px-4 relative border-b border-gray-100",children:[s.jsx(St,{variant:"ghost",size:"icon",onClick:j,className:"rounded-full absolute right-3 top-3 text-gray-400 hover:bg-gray-100",children:s.jsx(l,{className:"h-4 w-4"})}),s.jsx(ia,{className:"text-base font-medium text-gray-800",children:"Nova nota rápida"})]}),s.jsx(oa,{className:"p-4 space-y-4",children:s.jsx(Ja,{title:i,setTitle:n,description:o,setDescription:d,isToday:c,setIsToday:u,hasDueDate:m,setHasDueDate:h,isPriority:p,setIsPriority:f,hasReminder:x,setHasReminder:g,category:y,setCategory:b})}),s.jsxs(ra,{className:"flex justify-end gap-2 px-4 py-3 border-t border-gray-100 bg-gray-50",children:[s.jsx(St,{type:"button",variant:"outline",onClick:j,className:"bg-white text-sm h-9",children:"Cancelar"}),s.jsx(St,{type:"button",onClick:w,disabled:!i.trim()||v,className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-sm h-9",children:v?"Salvando...":"Salvar Nota"})]})]})})},Ga=e=>{switch(e){case"trabalho":return"#9b87f5";case"pessoal":return"#FF9500";case"saúde":return"#4CD964";case"estudo":return"#5AC8FA";case"financeiro":return"#FFCC33";case"social":return"#FF3B30";default:return null}},Ka=e=>{const t=e.toLowerCase(),a=(e=>(e.includes("almoço")||e.includes("jantar")||e.includes("café"))&&e.includes("com")?"event":["reunião","reunir","encontro","conversa","call","videoconferência","zoom","meet","teams"].some((t=>e.includes(t)))?"meeting":["evento","festa","celebração","aniversário","comemoração","workshop","seminário","palestra","viagem","viajar","visitar","ir para","voo","embarque","hotel","excursão","passeio","férias","almoço com","jantar com","café com"].some((t=>e.includes(t)))?"event":["hábito","rotina","diariamente","todas as manhãs","toda noite","todo dia","frequente","sempre"].some((t=>e.includes(t)))?"habit":"task")(t),s=(e=>{const t=new Date;if(e.includes("hoje"))return t;if(e.includes("amanhã")||e.includes("amanha"))return Ve(t,1);if(e.includes("depois de amanhã")||e.includes("depois de amanha"))return Ve(t,2);const a=/(\d{1,2})[\/.-](\d{1,2})(?:[\/.-](\d{2,4}))?/g.exec(e);if(a){const e=parseInt(a[1]),s=parseInt(a[2])-1;let r=a[3]?parseInt(a[3]):t.getFullYear();r<100&&(r+=2e3);const i=new Date(r,s,e);if(Ze(i))return i}const s=["domingo","segunda","segunda-feira","terça","terça-feira","quarta","quarta-feira","quinta","quinta-feira","sexta","sexta-feira","sábado"];for(let r=0;r<s.length;r++)if(e.includes(s[r])){let e=r%7-t.getDay();return e<=0&&(e+=7),Ve(t,e)}if(e.includes("próxima semana")||e.includes("proxima semana"))return Ve(t,7);if((e.includes("viagem")||e.includes("viajar"))&&!(e.includes("hoje")||e.includes("amanhã")||e.includes("amanha")))return Ve(t,7);for(let r=0;r<s.length;r++)if(e.includes(s[r])){let e=r%7-t.getDay();return e<=0&&(e+=7),Ve(t,e)}return t})(t);let r=(e=>{const t=/(\d{1,2})[:\s]?(\d{2})?\s*(?:horas|h|:)?/g.exec(e);if(t){const e=parseInt(t[1]),a=t[2]?parseInt(t[2]):0;if(e>=0&&e<24&&a>=0&&a<60)return`${e.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`}return e.includes("meio dia")||e.includes("meio-dia")?"12:00":e.includes("manhã")?"09:00":e.includes("tarde")?"14:00":e.includes("noite")?"19:00":e.includes("almoço")&&!t?"12:30":e.includes("jantar")&&!t?"20:00":e.includes("café da manhã")&&!t?"08:00":e.includes("café")&&e.includes("com")&&!t?"16:00":null})(t),i=(e=>{const t=["em","no","na","nos","nas","ao","à","aos","às"];for(const s of t){const t=new RegExp(`${s}\\s+([^,.]+)`,"i").exec(e);if(t&&t[1])return t[1].trim()}const a=e.match(/\bcom (?:os |as )?(pais|família|parentes|avós|tios|primos) d[aeo] ([A-Z][a-záàâãéèêíïóôõöúçñ]+)/i);return a&&a[2]?`Casa de ${a[2]}`:null})(t);const n=(e=>{const t=[],a=["com","e"];for(const r of a){const a=new RegExp(`${r}\\s+([A-Z][a-zÀ-ú]+(\\s[A-Z][a-zÀ-ú]+)?)`,"g");let s;for(;null!==(s=a.exec(e));)s[1]&&t.push(s[1].trim())}const s=e.match(/\bcom (?:os |as )?(pais|família|parentes|avós|tios|primos) d[aeo] ([A-Z][a-záàâãéèêíïóôõöúçñ]+)/i);if(s){const e=s[1],a=s[2];t.push(`${e} de ${a}`)}return t})(e),o=(e=>{const t={trabalho:["trabalho","reunião","escritório","cliente","projeto","negócio","profissional"],pessoal:["pessoal","casa","família","amigo","lazer"],"saúde":["médico","dentista","consulta","exame","academia","treino","exercício","yoga","fisioterapia"],estudo:["estudo","curso","aula","faculdade","escola","livro","leitura"],financeiro:["banco","financeiro","pagamento","compra","conta","dinheiro"],social:["almoço com","jantar com","café com","encontro","confraternização","festa","social"]};if((e.includes("almoço")||e.includes("jantar")||e.includes("café"))&&e.includes("com"))return"social";for(const[a,s]of Object.entries(t))if(s.some((t=>e.includes(t))))return a;return null})(t),l=Ga(o);let d=((e,t,a,s,r)=>{let i=e;if(i=i.replace(/^adicionar\s+/i,"").replace(/^criar\s+/i,"").replace(/^agendar\s+/i,"").replace(/^marcar\s+/i,"").replace(/^lembrar\s+/i,"").replace(/^lembrete\s+/i,""),t){i=i.replace(/\bhoje\b/gi,"").replace(/\bamanhã\b/gi,"").replace(/\bamanha\b/gi,"").replace(/\bdepois de amanhã\b/gi,"").replace(/\bdepois de amanha\b/gi,"").replace(/\bpróxima semana\b/gi,"").replace(/\bproxima semana\b/gi,"").replace(/\bna próxima semana\b/gi,"").replace(/\bna proxima semana\b/gi,"").replace(/\bno próximo mês\b/gi,"").replace(/\bno proximo mes\b/gi,"");const e=/\b\d{1,2}[\/.-]\d{1,2}(?:[\/.-]\d{2,4})?\b/g;i=i.replace(e,"");const t=["domingo","segunda","segunda-feira","terça","terça-feira","quarta","quarta-feira","quinta","quinta-feira","sexta","sexta-feira","sábado"];for(const a of t)i=i.replace(new RegExp(`\\b${a}\\b`,"gi"),"")}if(a){const e=/\b\d{1,2}[:\s]?\d{2}?\s*(?:horas|h|:)?\b/g;i=i.replace(e,""),i=i.replace(/\bmeio dia\b/gi,"").replace(/\bmeio-dia\b/gi,"").replace(/\bde manhã\b/gi,"").replace(/\bda manhã\b/gi,"").replace(/\bpela manhã\b/gi,"").replace(/\bà tarde\b/gi,"").replace(/\bda tarde\b/gi,"").replace(/\bà noite\b/gi,"").replace(/\bde noite\b/gi,"")}if(s){const e=["em","no","na","nos","nas","ao","à","aos","às"];for(const t of e){const e=new RegExp(`\\b${t}\\s+${s}\\b`,"gi");i=i.replace(e,"")}}for(const o of r)i=i.replace(new RegExp(`\\bcom\\s+${o}\\b`,"gi"),""),i=i.replace(new RegExp(`\\b${o}\\b`,"gi"),"");const n=e.match(/\b(almoço|jantar|café)\b.*\bcom\b.*\b(os|as)?\s*(pais|família|parentes)\s*d[aeo]\s*([A-Z][a-záàâãéèêíïóôõöúçñ]+)/i);if(n){const e=n[1],t=n[3],a=n[4];return`${e.charAt(0).toUpperCase()+e.slice(1)} com ${t} de ${a}`}return i=i.replace(/\s+/g," ").replace(/\s+[,\.]/g,",").trim(),i})(e,s,r,i,n);if(t.includes("viagem")||t.includes("viajar")||t.includes("voo")||t.includes("passear")||t.includes("excursão")||t.includes("férias")){if(!d||d.trim().length<3){const e=t.match(/para\s+(?:o|a|os|as)?\s*([a-záàâãéèêíïóôõöúçñ\s]+)(?:[\.,]|$)/i);if(e&&e[1]){const t=e[1].trim();d=`Viagem para ${t.charAt(0).toUpperCase()+t.slice(1)}`,i||(i=t.charAt(0).toUpperCase()+t.slice(1))}else d="Viagem"}d.toLowerCase().includes("viagem")||(d="Viagem: "+d)}if((t.includes("almoço")||t.includes("jantar")||t.includes("café"))&&t.includes("com")){const t=e.match(/\b(almoço|jantar|café)\b.*\bcom\b.*\b(os|as)?\s*(pais|família|parentes)\s*d[aeo]\s*([A-Z][a-zÀ-ú]+)/i);if(t){const a=t[1],o=t[3],l=t[4];d=`${a.charAt(0).toUpperCase()+a.slice(1)} com ${o} de ${l}`;const c="social";if(r||(a.includes("almoço")?r="12:30":a.includes("jantar")?r="20:00":a.includes("café")&&(r="09:00")),!i){const t=e.match(/\b(na|no)\s+([A-Za-záàâãéèêíïóôõöúçñ\s]+)(?:[\.,]|$)/i);i=t&&t[2]?t[2].trim():`Casa de ${l}`}return 0===n.length&&n.push(`${o} de ${l}`),{title:d,date:s?He(s,"yyyy-MM-dd"):null,time:r,type:"event",location:i,people:n,category:c,suggestedColor:Ga(c)}}}return d=d.charAt(0).toUpperCase()+d.slice(1),{title:d,date:s?He(s,"yyyy-MM-dd"):null,time:r,type:"task"===a&&(t.includes("viagem")||t.includes("viajar"))?"event":a,location:i,people:n,category:o,suggestedColor:l}},Wa=({inputText:e,setInputText:t})=>{const r=a.useRef(null);a.useEffect((()=>{r.current&&r.current.focus()}),[]);return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ma,{htmlFor:"task-input",className:"text-gray-700 text-lg font-medium",children:"O que?"}),s.jsxs("div",{className:"relative",children:[s.jsx(da,{ref:r,id:"task-input",value:e,onChange:e=>t(e.target.value),placeholder:"Descreva sua atividade...",className:"text-lg pr-10 border-2 border-purple-200 focus:border-purple-400 shadow-sm",autoComplete:"off"}),s.jsx(je,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"})]}),s.jsx("p",{className:"text-xs text-gray-500",children:'Exemplo: "Reunião com cliente amanhã às 14h" ou "Tomar remédio às 8h"'})]}),!e&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-2 my-3",children:[s.jsx("div",{className:"h-px bg-gray-200 flex-grow"}),s.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[s.jsx(we,{className:"h-3 w-3"}),"Ou selecione uma sugestão"]}),s.jsx("div",{className:"h-px bg-gray-200 flex-grow"})]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Responder e-mails","Reunião com equipe","Fazer exercícios","Tomar medicação","Jantar com família","Ler livro","Estudar para exame","Comprar mantimentos","Ligar para cliente"].map((e=>s.jsx("button",{className:"text-left px-3 py-2 text-sm bg-gray-50 hover:bg-gray-100 rounded-md transition-colors",onClick:()=>(e=>{t(e),r.current&&r.current.focus()})(e),type:"button",children:e},e)))})]})]})},Ya=ze("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Qa({className:e,variant:t,...a}){return s.jsx("div",{className:lt(Ya({variant:t}),e),...a})}const es=({detectedContext:e,taskType:t,date:a,time:r,location:i})=>{if(!(e.title||a||r||i))return null;return s.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-md p-3 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Detectamos:"}),s.jsxs(Qa,{className:`${(e=>{switch(e){case"meeting":return"bg-indigo-100 text-indigo-800 border-indigo-200";case"event":return"bg-green-100 text-green-800 border-green-200";case"habit":return"bg-amber-100 text-amber-800 border-amber-200";default:return"bg-purple-100 text-purple-800 border-purple-200"}})(t)} border`,children:[(e=>{switch(e){case"meeting":return s.jsx(L,{className:"h-4 w-4 text-indigo-600"});case"event":return s.jsx(V,{className:"h-4 w-4 text-green-600"});case"habit":return s.jsx(B,{className:"h-4 w-4 text-amber-600"});default:return s.jsx(H,{className:"h-4 w-4 text-purple-600"})}})(t),s.jsx("span",{className:"ml-1",children:(e=>{switch(e){case"meeting":return"Reunião";case"event":return"Evento";case"habit":return"Hábito";default:return"Tarefa"}})(t)})]})]}),s.jsxs("div",{className:"space-y-1",children:[a&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(ge,{className:"h-4 w-4 text-gray-500"}),s.jsx("span",{children:(e=>{const t=new Date;t.setHours(0,0,0,0);const a=new Date(t);a.setDate(a.getDate()+1);const s=new Date(e);if(s.setHours(0,0,0,0),s.getTime()===t.getTime())return"Hoje";if(s.getTime()===a.getTime())return"Amanhã";{const e=Math.floor((s.getTime()-t.getTime())/864e5);return He(s,e>0&&e<7?"EEEE":"dd 'de' MMMM",{locale:Xe})}})(a)})]}),r&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(je,{className:"h-4 w-4 text-gray-500"}),s.jsx("span",{children:r})]}),i&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(Ne,{className:"h-4 w-4 text-gray-500"}),s.jsx("span",{children:i})]})]}),s.jsx("p",{className:"text-xs text-gray-500 italic",children:"Você pode ajustar esses detalhes abaixo se necessário."})]})},ts=({title:e,setTitle:t,date:a,setDate:r,time:i,setTime:n,location:o,setLocation:l,details:d,setDetails:c,taskType:u,isCalendarOpen:m,setIsCalendarOpen:h})=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ma,{htmlFor:"task-title",className:"text-gray-700",children:"Título"}),s.jsxs("div",{className:"flex items-center gap-2",children:[(e=>{switch(e){case"meeting":return s.jsx(L,{className:"h-5 w-5 text-indigo-600"});case"event":return s.jsx(V,{className:"h-5 w-5 text-green-600"});case"habit":return s.jsx(B,{className:"h-5 w-5 text-amber-600"});default:return s.jsx(H,{className:"h-5 w-5 text-purple-600"})}})(u),s.jsx(da,{id:"task-title",value:e,onChange:e=>t(e.target.value),placeholder:"Título da tarefa",className:"flex-1"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ma,{className:"text-gray-700",children:"Quando?"}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[s.jsx("div",{className:"flex-1",children:s.jsxs(Ia,{open:m,onOpenChange:h,children:[s.jsx(Aa,{asChild:!0,children:s.jsxs(St,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[s.jsx(ge,{className:"mr-2 h-4 w-4"}),a?He(a,"PPP",{locale:Xe}):s.jsx("span",{children:"Selecionar data"})]})}),s.jsx(Fa,{className:"w-auto p-0",children:s.jsx(Ra,{mode:"single",selected:a,onSelect:e=>{r(e),h(!1)},initialFocus:!0})})]})}),s.jsx("div",{className:"sm:w-1/3",children:s.jsxs("div",{className:"relative",children:[s.jsx(da,{type:"time",value:i||"",onChange:e=>n(e.target.value||null),className:"pl-9"}),s.jsx(je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 h-4 w-4"})]})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ma,{htmlFor:"task-location",className:"text-gray-700",children:"Local (opcional)"}),s.jsxs("div",{className:"relative",children:[s.jsx(da,{id:"task-location",value:o||"",onChange:e=>l(e.target.value||null),placeholder:"Onde acontecerá?",className:"pl-9"}),s.jsx(Ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 h-4 w-4"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ma,{htmlFor:"task-details",className:"text-gray-700",children:"Detalhes (opcional)"}),s.jsxs("div",{className:"relative",children:[s.jsx(ca,{id:"task-details",value:d,onChange:e=>c(e.target.value),placeholder:"Alguma observação ou detalhe adicional?",className:"min-h-[80px] pl-9 pt-2"}),s.jsx(ke,{className:"absolute left-3 top-3 text-gray-500 h-4 w-4"})]})]})]});function as(e,t,a,s,r,i,n,o,l,d){let c=0;"daily"===a?c=30:"weekly"===a?c=12:"monthly"===a&&(c=6);const u=((e,t,a)=>{const s=[];if("daily"===e)for(let r=0;r<a;r++)s.push(He(Ve(t,r+1),"yyyy-MM-dd"));else if("weekly"===e)for(let r=0;r<a;r++)s.push(He(Ve(t,7*(r+1)),"yyyy-MM-dd"));else if("monthly"===e)for(let r=0;r<a;r++)s.push(He(Je(t,r+1),"yyyy-MM-dd"));return s})(a,s,c),m=[];for(let h=0;h<u.length;h++){const s={user_id:t,title:r,details:i,type:n,scheduled_date:u[h],start_time:o,location:l,completed:!1,frequency:a,duration:d,scheduled:!0,parent_task_id:e};m.push(s)}return 0===m.length?Promise.resolve():new Promise(((e,t)=>{Dt.from("tasks").insert(m).then((({error:a})=>{a?t(a):e()}))}))}const ss=async({title:e,date:t,time:a,location:s,details:r,taskType:i,detectedContext:n,frequency:o="once",inboxOnly:l=!0})=>{try{const{data:{user:c}}=await Dt.auth.getUser();if(!c)throw new Error("Usuário não autenticado");const u=He(t,"yyyy-MM-dd");if("habit"===i){const{data:t,error:s}=await Dt.from("daily_routines").insert({user_id:c.id,title:e,description:r,scheduled_date:u,start_time:a||null,frequency:o||"daily",completed:!1,category:"habit",scheduled:!l}).select();if(s)throw s;return t}{let m=null;n.duration&&(m=(d=n.duration)?/^\d+$/.test(d)?parseInt(d):{"5min":5,"15min":15,"30min":30,"45min":45,"1h":60,"1h30":90,"2h":120,custom:30}[d]||30:30);const{data:h,error:p}=await Dt.from("tasks").insert({user_id:c.id,title:e,details:r,type:i,scheduled_date:u,start_time:a||null,location:s||null,completed:!1,frequency:o||"once",duration:m,scheduled:!l}).select();if(p)throw p;return o&&"once"!==o&&!l&&h&&h.length>0&&await as(h[0].id,c.id,o,t,e,r||"",i,a,s,m),h}}catch(c){throw c}var d},rs=ze("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive",success:"border-green-500/50 text-green-700 dark:border-green-500 [&>svg]:text-green-600"}},defaultVariants:{variant:"default"}}),is=a.forwardRef((({className:e,variant:t,...a},r)=>s.jsx("div",{ref:r,role:"alert",className:lt(rs({variant:t}),e),...a})));is.displayName="Alert";const ns=a.forwardRef((({className:e,...t},a)=>s.jsx("h5",{ref:a,className:lt("mb-1 font-medium leading-none tracking-tight",e),...t})));ns.displayName="AlertTitle";const os=a.forwardRef((({className:e,...t},a)=>s.jsx("div",{ref:a,className:lt("text-sm [&_p]:leading-relaxed",e),...t})));os.displayName="AlertDescription";const ls=({onOpenChange:e,onSuccess:t,initialData:r})=>{const[i,n]=a.useState(""),[o,l]=a.useState(""),[d,c]=a.useState(new Date),[u,m]=a.useState(null),[h,p]=a.useState(null),[f,x]=a.useState(""),[g,y]=a.useState(!1),[b,v]=a.useState(!1),[j,w]=a.useState(null),[N,k]=a.useState("task"),{processText:C,detectedContext:S}=(()=>{const[e,t]=a.useState({title:"",date:null,time:null,type:"task",location:null,people:[],category:null,suggestedColor:null});return{processText:e=>{const a=Ka(e);t(a)},detectedContext:e}})(),{toast:E}=nt();a.useEffect((()=>{if(r){if(r.fullMessage&&(n(r.fullMessage),C(r.fullMessage)),r.title&&l(r.title),r.taskType&&k(r.taskType),r.date)try{if(r.date instanceof Date)c(r.date);else if("string"==typeof r.date)try{const e=Ge(r.date);if(isNaN(e.getTime()))throw new Error("Data inválida");c(e)}catch(e){const t=r.date.toLowerCase(),a=new Date;t.includes("amanhã")?c(Ve(a,1)):t.includes("hoje")?c(a):t.includes("segunda")?c(T(1)):t.includes("terça")?c(T(2)):t.includes("quarta")?c(T(3)):t.includes("quinta")?c(T(4)):t.includes("sexta")?c(T(5)):t.includes("sábado")?c(T(6)):t.includes("domingo")&&c(T(0))}}catch(e){c(new Date)}r.time&&m(r.time),r.location&&p(r.location)}}),[r]);const T=e=>{const t=new Date,a=new Date(t);return a.setDate(t.getDate()+(e-t.getDay()+7)%7),a};a.useEffect((()=>{i.trim()&&C(i)}),[i]),a.useEffect((()=>{if(S.title&&!(null==r?void 0:r.title)&&l(S.title),S.type&&!(null==r?void 0:r.taskType)&&k(S.type),S.date)try{const e=Ge(S.date);Ze(e)&&c(e)}catch(e){}S.time&&!(null==r?void 0:r.time)&&m(S.time),S.location&&!(null==r?void 0:r.location)&&p(S.location)}),[S,r]);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx(Wa,{inputText:i,setInputText:n}),i&&s.jsx(es,{detectedContext:S,taskType:N,date:d,time:u,location:h}),j&&s.jsxs(is,{variant:"destructive",className:"bg-red-50 text-red-800 border-red-200",children:[s.jsx(Ce,{className:"h-4 w-4"}),s.jsx(os,{children:j})]}),s.jsx(ts,{title:o,setTitle:l,date:d,setDate:c,time:u,setTime:m,location:h,setLocation:p,details:f,setDetails:x,taskType:N,isCalendarOpen:g,setIsCalendarOpen:y})]}),s.jsx(ra,{className:"px-6 py-4 bg-gray-50 border-t border-gray-100 sticky bottom-0",children:s.jsxs("div",{className:"flex gap-3 w-full",children:[s.jsx(St,{variant:"outline",onClick:()=>{n(""),l(""),c(new Date),m(null),p(null),x(""),y(!1),k("task"),w(null),e(!1)},className:"flex-1",type:"button",children:"Cancelar"}),s.jsx(St,{onClick:async()=>{if(w(null),o.trim()?d||(E({variant:"destructive",title:"Erro",description:"A data da tarefa é obrigatória."}),0):(E({variant:"destructive",title:"Erro",description:"O título da tarefa é obrigatório."}),0)){v(!0);try{await ss({title:o,date:d,time:u,location:h,details:f,taskType:N,detectedContext:S});E({title:"Sucesso!",description:`${"habit"===N?"Hábito":"Tarefa"} "${o}" criado com sucesso e adicionado à sua agenda.`,variant:"default",duration:5e3}),e(!1),t&&t()}catch(a){w(a.message||"Não foi possível criar a tarefa. Verifique sua conexão e tente novamente."),E({variant:"destructive",title:"Erro",description:"Não foi possível criar a tarefa. Verifique os detalhes abaixo."})}finally{v(!1)}}},className:"flex-1 bg-gradient-to-r from-purple-500 to-indigo-600",disabled:b||!o.trim()||!d,type:"button",children:b?"Criando...":"Criar Tarefa"})]})})]})},ds=({isOpen:e,onOpenChange:t,onSuccess:a,initialData:r})=>s.jsx(Qt,{open:e,onOpenChange:t,children:s.jsxs(aa,{className:"max-w-md p-0 overflow-hidden bg-white rounded-3xl mx-auto animate-fadeIn shadow-xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(sa,{className:"px-6 pt-6 pb-3 flex justify-between items-center border-b border-gray-100 bg-gradient-to-r from-purple-500 to-indigo-600 text-white relative",children:[s.jsx(St,{variant:"ghost",size:"icon",onClick:()=>{t(!1)},className:"rounded-full absolute right-4 top-4 text-white hover:bg-white/20",children:s.jsx(l,{className:"h-6 w-6"})}),s.jsx(ia,{className:"text-2xl font-bold",children:"Tarefa Rápida"})]}),s.jsx("div",{className:"px-6 py-4 space-y-4 overflow-y-auto max-h-[60vh]",children:s.jsx(ls,{onOpenChange:t,onSuccess:a,initialData:r})})]})}),cs=a.lazy((()=>Ue((()=>import("./Index-DeOu0rCn.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])))),us=a.lazy((()=>Ue((()=>import("./Today-Br2sLK4C.js")),__vite__mapDeps([12,1,2,3,5,13,8])))),ms=a.lazy((()=>Ue((()=>import("./Planner-BcOUA1gn.js")),__vite__mapDeps([14,1,2,3,15,13])))),hs=a.lazy((()=>Ue((()=>import("./Achievements-REa8krks.js")),__vite__mapDeps([16,1,2,3])))),ps=a.lazy((()=>Ue((()=>import("./Settings-DscWvqqi.js")),__vite__mapDeps([17,1,2,3,10,9,15])))),fs=a.lazy((()=>Ue((()=>import("./Auth-BQVoxxAg.js")),__vite__mapDeps([18,1,2,3,4,5])))),xs=a.lazy((()=>Ue((()=>import("./NotFound-8AlYBxhJ.js")),__vite__mapDeps([19,1,2,3])))),gs=a.lazy((()=>Ue((()=>import("./Mindfulness-B3lhV7pL.js")),__vite__mapDeps([20,1,2,3,10,11,7])))),ys=a.lazy((()=>Ue((()=>import("./Assistant-DMgqA09T.js")),__vite__mapDeps([21,1,2,3,6,10,11,9])))),bs=a.lazy((()=>Ue((()=>import("./ProfileEdit-CWjr9kXf.js")),__vite__mapDeps([22,1,2,3])))),vs=new $e;"undefined"!=typeof window&&(()=>{try{Yt.initialize()}catch(e){}})();const js=()=>{const[e,t]=a.useState(!1),[r,i]=a.useState(!1),[n,o]=a.useState(!1),[l,d]=a.useState(!1),[c,u]=a.useState(!1),[m,h]=a.useState(!1),[p,f]=a.useState(!1),x=_(),{refreshTasksFunction:g}=Tt();if("/auth"===x.pathname)return null;const y=()=>{g()};return s.jsxs(s.Fragment,{children:[s.jsx(St,{onClick:()=>f(!0),variant:"quickAdd","aria-label":"Tarefa Rápida",className:"fixed bottom-6 right-6 w-14 h-14 bg-gradient-to-r from-purple-500 to-indigo-600 shadow-lg hover:shadow-xl transition-all z-40 flex items-center justify-center px-0 py-0 my-0 mx-0 text-sm rounded-full font-thin",children:s.jsx(De,{className:"h-7 w-7 text-white"})}),s.jsx(la,{isOpen:e,onOpenChange:t,onSelect:e=>{switch(e){case"meeting":i(!0);break;case"task":o(!0);break;case"event":d(!0);break;case"habit":u(!0)}}}),s.jsx(ha,{isOpen:r,onOpenChange:i,onSuccess:y}),s.jsx(wa,{isOpen:n,onOpenChange:o,onSuccess:y}),s.jsx(Na,{isOpen:l,onOpenChange:d,onSuccess:y}),s.jsx(Ha,{isOpen:c,onOpenChange:u,onSuccess:y}),s.jsx(Xa,{isOpen:m,onOpenChange:h,onSuccess:y}),s.jsx(ds,{isOpen:p,onOpenChange:f,onSuccess:y})]})},ws=()=>(_(),s.jsxs("div",{className:"flex min-h-screen bg-background w-full max-w-full overflow-hidden",children:[s.jsx(Zt,{}),s.jsxs("div",{className:"flex-1 overflow-auto w-full max-w-full mx-0",children:[s.jsx(a.Suspense,{fallback:s.jsx("div",{className:"flex items-center justify-center h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500"})}),children:s.jsxs(Ee,{children:[s.jsx(Te,{path:"/",element:s.jsx(cs,{})}),s.jsx(Te,{path:"/today",element:s.jsx(us,{})}),s.jsx(Te,{path:"/planner",element:s.jsx(ms,{})}),s.jsx(Te,{path:"/achievements",element:s.jsx(hs,{})}),s.jsx(Te,{path:"/settings",element:s.jsx(ps,{})}),s.jsx(Te,{path:"/profile/edit",element:s.jsx(bs,{})}),s.jsx(Te,{path:"/mindfulness",element:s.jsx(gs,{})}),s.jsx(Te,{path:"/assistant",element:s.jsx(ys,{})}),s.jsx(Te,{path:"*",element:s.jsx(xs,{})})]})}),s.jsx(js,{})]})]})),Ns=({children:e})=>{const[t,r]=a.useState(null),i=_();return a.useEffect((()=>{Dt.auth.getSession().then((({data:{session:e}})=>{r(!!e)}));const{data:{subscription:e}}=Dt.auth.onAuthStateChange(((e,t)=>{r(!!t)}));return()=>e.unsubscribe()}),[]),null===t?null:t?s.jsx(s.Fragment,{children:e}):s.jsx(_e,{to:"/auth",state:{from:i},replace:!0})},ks=()=>s.jsx(Se,{client:vs,children:s.jsx(Nt,{children:s.jsxs(yt,{children:[s.jsx(xt,{}),s.jsx(gt,{}),s.jsx("div",{className:"w-full max-w-full overflow-hidden",children:s.jsx(a.Suspense,{fallback:s.jsx("div",{className:"flex items-center justify-center h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500"})}),children:s.jsxs(Ee,{children:[s.jsx(Te,{path:"/auth",element:s.jsx(fs,{})}),s.jsx(Te,{path:"/*",element:s.jsx(Ns,{children:s.jsx(ws,{})})})]})})})]})})});const Cs=a.createContext(void 0),Ss=({children:e})=>{const t=function(){const[e,t]=a.useState((()=>"undefined"!=typeof window&&localStorage.getItem("theme")||"system")),[s,r]=a.useState((()=>"system"!==e?e:"undefined"!=typeof window&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),i=a.useCallback((e=>{t(e),"undefined"!=typeof window&&localStorage.setItem("theme",e)}),[]),n=a.useCallback((()=>{i("light"===s?"dark":"light")}),[s,i]),o=a.useCallback((()=>{i("system")}),[i]);return a.useEffect((()=>{if("undefined"==typeof window)return;const t=()=>{if("system"===e){const e=window.matchMedia("(prefers-color-scheme: dark)").matches;r(e?"dark":"light")}else r(e)};t();const a=window.matchMedia("(prefers-color-scheme: dark)"),s=()=>t();return a.addEventListener?a.addEventListener("change",s):a.addListener(s),()=>{a.removeEventListener?a.removeEventListener("change",s):a.removeListener(s)}}),[e]),a.useEffect((()=>{if("undefined"==typeof document)return;const e=document.documentElement;e.classList.remove("light-theme","dark-theme","dark"),"dark"===s?(e.classList.add("dark-theme"),e.classList.add("dark")):e.classList.add("light-theme"),e.setAttribute("data-theme",s)}),[s]),{theme:e,resolvedTheme:s,setTheme:i,toggleTheme:n,resetTheme:o,isDark:"dark"===s,isLight:"light"===s,isSystem:"system"===e}}();return s.jsx(Cs.Provider,{value:t,children:e})},Es={user:null,theme:"system",tasks:[],loading:{global:!1,tasks:!1,user:!1},error:{global:null,tasks:null,user:null}},Ts=(e,t)=>{switch(t.type){case"SET_USER":return{...e,user:t.payload.user};case"SET_THEME":return{...e,theme:t.payload.theme};case"SET_TASKS":return{...e,tasks:t.payload.tasks};case"ADD_TASK":return{...e,tasks:[...e.tasks,t.payload.task]};case"UPDATE_TASK":return{...e,tasks:e.tasks.map((e=>e.id===t.payload.taskId?{...e,...t.payload.updates}:e))};case"DELETE_TASK":return{...e,tasks:e.tasks.filter((e=>e.id!==t.payload.taskId))};case"SET_LOADING":return{...e,loading:{...e.loading,[t.payload.resource]:t.payload.loading}};case"SET_ERROR":return{...e,error:{...e.error,[t.payload.resource]:t.payload.error}};case"RESET_STATE":return Es;default:return e}},_s=a.createContext(void 0),Ds=({children:e})=>{const[t,r]=a.useReducer(Ts,Es);return s.jsx(_s.Provider,{value:{state:t,dispatch:r},children:e})},Os=a.memo((({resources:e=[],fonts:t=[],showIndicator:r=!1,onLoaded:i})=>{const[n,o]=a.useState(!1),[l,d]=a.useState(0);return a.useEffect((()=>{if(0===e.length&&0===t.length)return o(!0),void(null==i||i());const a=[...t.map((e=>new Promise((t=>{new FontFace(e.family,`url(${e.family})`,{weight:e.weight||"normal",style:e.style||"normal",display:e.display||"swap"}).load().then((e=>{document.fonts.add(e),t()})).catch((e=>{t()}))})))),...e.map((e=>new Promise((t=>{const a=new Image;a.src=e,a.onload=()=>t(),a.onerror=()=>{t()}}))))],s=a.length;let r=0;a.forEach((e=>{e.then((()=>{r++;const e=Math.round(r/s*100);d(e),r===s&&(o(!0),null==i||i())}))})),Promise.all(a).then((()=>{o(!0),null==i||i()}))}),[e,t,i]),r?s.jsx("div",{className:"fixed bottom-4 right-4 bg-white dark:bg-gray-800 rounded-full shadow-md transition-opacity duration-300 "+(n?"opacity-0 pointer-events-none":"opacity-100"),style:{zIndex:9999},children:s.jsxs("div",{className:"relative h-8 w-8 flex items-center justify-center",children:[s.jsxs("svg",{className:"absolute inset-0",viewBox:"0 0 32 32",children:[s.jsx("circle",{className:"text-gray-200 dark:text-gray-700",strokeWidth:"2",stroke:"currentColor",fill:"transparent",r:"14",cx:"16",cy:"16"}),s.jsx("circle",{className:"text-primary",strokeWidth:"2",strokeDasharray:88,strokeDashoffset:88-l/100*88,strokeLinecap:"round",stroke:"currentColor",fill:"transparent",r:"14",cx:"16",cy:"16"})]}),s.jsxs("span",{className:"text-xs font-medium",children:[l,"%"]})]})}):null})),Is=a.memo((({enabled:e=!0,debug:t=!1,onMetrics:s})=>{const r=a.useRef({fcp:null,lcp:null,fid:null,cls:null,tti:null,tbt:null});return a.useEffect((()=>{if(!e)return;document.documentElement.classList.add("optimize-animations"),setTimeout((()=>{document.documentElement.classList.remove("optimize-animations")}),2e3),setTimeout((()=>{["https://fonts.googleapis.com","https://fonts.gstatic.com"].forEach((e=>{const t=document.createElement("link");t.rel="preconnect",t.href=e,t.crossOrigin="anonymous",document.head.appendChild(t)})),["/favicon.ico"].forEach((e=>{const t=document.createElement("link");t.rel="preload",t.href=e,t.as="image",document.head.appendChild(t)}))}),1e3),"requestIdleCallback"in window||(window.requestIdleCallback=e=>{const t=Date.now();return setTimeout((()=>{e({didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-t))})}),1)},window.cancelIdleCallback=e=>{clearTimeout(e)});window.requestIdleCallback((()=>{document.querySelectorAll("img:not([loading])").forEach((e=>{e.hasAttribute("loading")||e.setAttribute("loading","lazy"),e.hasAttribute("decoding")||e.setAttribute("decoding","async")}))})),document.documentElement.classList.add("optimize-fonts")}),[e]),a.useEffect((()=>{if(!e)return;const t=()=>{s&&s(r.current)},a=[];try{"PerformanceObserver"in window&&(a.push((()=>{const e=new PerformanceObserver((e=>{for(const t of e.getEntries())"first-contentful-paint"===t.name&&(r.current.fcp=t.startTime)}));return e.observe({type:"paint",buffered:!0}),e})()),a.push((()=>{const e=new PerformanceObserver((e=>{const t=e.getEntries(),a=t[t.length-1];r.current.lcp=a.startTime}));return e.observe({type:"largest-contentful-paint",buffered:!0}),e})()),a.push((()=>{const e=new PerformanceObserver((e=>{for(const t of e.getEntries())r.current.fid=t.processingStart-t.startTime}));return e.observe({type:"first-input",buffered:!0}),e})()),a.push((()=>{let e=0,t=[];const a=new PerformanceObserver((a=>{for(const s of a.getEntries())if(!s.hadRecentInput){const a=0===t.length,i=a?0:s.startTime-t[t.length-1].startTime;a||i<1e3&&s.startTime-t[0].startTime<5e3?t.push(s):t=[s];let n=0;t.forEach((e=>{n+=e.value})),n>e&&(e=n,r.current.cls=e)}}));return a.observe({type:"layout-shift",buffered:!0}),a})()))}catch(i){}return window.addEventListener("load",(()=>{window.requestIdleCallback((()=>{t()}))})),window.addEventListener("beforeunload",t),()=>{a.forEach((e=>e.disconnect())),window.removeEventListener("beforeunload",t)}}),[e,t,s]),null}));function As(){return s.jsx(_t,{children:s.jsx(Ae,{children:s.jsx(ks,{})})})}Oe.createRoot(document.getElementById("root")).render(s.jsx(Ie.StrictMode,{children:s.jsx(Ds,{children:s.jsx(Ss,{children:s.jsxs(Bt,{children:[s.jsx(Is,{debug:!1,onMetrics:e=>{}}),s.jsx(Os,{resources:["/placeholder.svg","/favicon.ico"]}),s.jsx(As,{}),s.jsx(xt,{})]})})})}));export{qt as A,St as B,Ra as C,Qt as D,Zt as E,is as F,os as G,as as H,da as I,lt as J,Ht as K,ma as L,ds as M,Ct as N,yt as O,Ia as P,bt as Q,vt as R,Ca as S,ca as T,jt as U,Ha as V,ns as W,Cs as X,kt as a,Ut as b,$t as c,Ea as d,Sa as e,Da as f,Oa as g,Aa as h,Fa as i,aa as j,sa as k,ia as l,oa as m,ra as n,Qa as o,na as p,nt as q,Ot as r,Dt as s,Rt as t,Jt as u,zt as v,Mt as w,Lt as x,Pt as y,Tt as z};
